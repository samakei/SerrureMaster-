import{M as e,a as t,u as s,j as a,L as r}from"./index-BHXrIWmA.js";import{r as l}from"./react-vendor-C11u62No.js";import{k as i,H as n,J as o,z as d,K as c,L as x,N as m,O as u,R as h,y as p,V as b,t as g,g as j,Y as f,m as v,T as N,F as w,_ as y,$ as D,a0 as k,a1 as S,P as C,e as P,s as A,a2 as F}from"./icons-D4y1Z8Z8.js";import"./supabase-DzS9I7wL.js";const I=[{id:e,email:"client@test.com",name:"Client Test",purchasedProductIds:["p1_door_slammed"],role:"user",status:"active",joinedAt:"2023-10-15"},{id:"u2",email:"jean.dupont@gmail.com",name:"Jean Dupont",purchasedProductIds:["p1_door_slammed","p3_cylinder_replace"],role:"user",status:"active",joinedAt:"2023-10-18"},{id:"u3",email:"marie.curie@yahoo.fr",name:"Marie Curie",purchasedProductIds:[],role:"user",status:"active",joinedAt:"2023-10-20"},{id:"u4",email:"hacker@bad.com",name:"Hacker",purchasedProductIds:["p4_security_audit"],role:"user",status:"blocked",joinedAt:"2023-10-21"},{id:"u5",email:"samakeissa161@gmail.com",name:"Thomas Admin",purchasedProductIds:[],role:"admin",status:"active",joinedAt:"2023-01-01"}],R=[{id:"l1",timestamp:new Date(Date.now()-3e5).toISOString(),ip:"192.168.1.45",action:"DOWNLOAD_PDF",userId:"u2",details:"Guide Complet.pdf",severity:"info"},{id:"l2",timestamp:new Date(Date.now()-9e5).toISOString(),ip:"45.23.12.99",action:"LOGIN_FAILED",userId:"unknown",details:"Wrong password 3 times",severity:"warning"},{id:"l3",timestamp:new Date(Date.now()-27e5).toISOString(),ip:"192.168.1.45",action:"DOWNLOAD_PDF",userId:"u2",details:"Guide Complet.pdf",severity:"info"},{id:"l4",timestamp:new Date(Date.now()-276e4).toISOString(),ip:"192.168.1.45",action:"DOWNLOAD_PDF",userId:"u2",details:"Guide Complet.pdf",severity:"warning"},{id:"l5",timestamp:new Date(Date.now()-72e5).toISOString(),ip:"88.12.34.56",action:"PURCHASE_SUCCESS",userId:"u4",details:"Product: p4_security_audit",severity:"info"},{id:"l6",timestamp:new Date(Date.now()-864e5).toISOString(),ip:"10.0.0.1",action:"ADMIN_LOGIN",userId:"u5",details:"Successful login",severity:"info"}],L=({data:e})=>{const t=Math.max(...e.map(e=>e.amount))||100,s=e.map((s,a)=>`${a/(e.length-1)*100},${100-s.amount/t*100}`).join(" ");return a.jsxs("div",{className:"w-full h-40 relative mt-4",children:[a.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full overflow-visible",children:[a.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"0",stroke:"#334155",strokeWidth:"0.5",strokeDasharray:"2"}),a.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"#334155",strokeWidth:"0.5",strokeDasharray:"2"}),a.jsx("line",{x1:"0",y1:"100",x2:"100",y2:"100",stroke:"#334155",strokeWidth:"0.5",strokeDasharray:"2"}),a.jsx("polyline",{fill:"none",stroke:"#818cf8",strokeWidth:"2",points:s,vectorEffect:"non-scaling-stroke"}),a.jsx("polygon",{fill:"url(#gradient)",stroke:"none",points:`0,100 ${s} 100,100`}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"#818cf8",stopOpacity:"0.2"}),a.jsx("stop",{offset:"100%",stopColor:"#818cf8",stopOpacity:"0"})]})})]}),a.jsx("div",{className:"flex justify-between text-[10px] text-slate-400 mt-2",children:e.filter((e,t)=>t%3==0).map((e,t)=>a.jsx("span",{children:e.date},t))})]})},T=({product:e})=>{var s;const{courses:r,addModule:i,addLesson:n,updateLessonStatus:o}=t(),d=r[e.id],[c,x]=l.useState(""),[m,u]=l.useState(null),[h,p]=l.useState(""),[b,g]=l.useState(""),[j,v]=l.useState(""),[N,w]=l.useState(""),y=()=>{m&&h&&b&&(n(e.id,m,{title:h,videoUrl:b,duration:j||"00:00",provider:"native",description:N}),u(null),p(""),g(""),v(""),w(""))};return a.jsxs("div",{className:"mt-6 bg-slate-900/50 rounded-xl border border-slate-700 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"text-white font-bold flex items-center",children:[a.jsx(k,{className:"w-5 h-5 mr-2 text-indigo-500"}),"Programme Vidéo (LMS)"]}),a.jsx("span",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:e.title})]}),a.jsxs("div",{className:"flex gap-2 mb-6",children:[a.jsx("label",{htmlFor:"new-module-title",className:"sr-only",children:"Titre du nouveau module"}),a.jsx("input",{id:"new-module-title",type:"text",placeholder:"Titre du nouveau module...",className:"flex-1 bg-slate-800 border border-slate-600 rounded p-2 text-sm text-white focus:border-indigo-500 outline-none",value:c,onChange:e=>x(e.target.value)}),a.jsxs("button",{onClick:()=>{c.trim()&&(i(e.id,c),x(""))},className:"bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-2 rounded text-sm font-bold flex items-center shadow-lg shadow-indigo-900/20",children:[a.jsx(C,{className:"w-4 h-4 mr-1"})," Module"]})]}),a.jsxs("div",{className:"space-y-4",children:[null==(s=null==d?void 0:d.modules)?void 0:s.map((t,s)=>a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[a.jsxs("div",{className:"p-3 bg-slate-700/50 flex justify-between items-center border-b border-slate-700",children:[a.jsxs("span",{className:"text-sm font-bold text-white flex items-center",children:[a.jsx("span",{className:"bg-slate-600 text-slate-300 w-5 h-5 flex items-center justify-center rounded-full text-[10px] mr-2",children:s+1}),t.title]}),a.jsxs("button",{onClick:()=>u(m===t.id?null:t.id),className:"text-xs px-3 py-1.5 rounded transition font-bold flex items-center "+(m===t.id?"bg-red-500/20 text-red-400":"bg-slate-600 hover:bg-slate-500 text-white"),children:[m===t.id?a.jsx(P,{className:"w-3 h-3 mr-1"}):a.jsx(C,{className:"w-3 h-3 mr-1"}),m===t.id?"Annuler":"Ajouter Leçon"]})]}),m===t.id&&a.jsxs("div",{className:"p-4 bg-slate-900/50 border-b border-slate-700 animate-fade-in shadow-inner",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h5",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wide",children:"Nouvelle Leçon"}),a.jsx("span",{className:"text-[10px] text-slate-400 bg-slate-800 px-2 py-1 rounded border border-slate-700",children:"Brouillon par défaut"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{htmlFor:"lesson-title",className:"block text-[10px] uppercase text-slate-400 font-bold mb-1",children:"Titre de la leçon *"}),a.jsx("input",{id:"lesson-title",value:h,onChange:e=>p(e.target.value),placeholder:"Ex: Introduction au crochetage...",className:"w-full bg-slate-800 border border-slate-600 rounded p-2 text-xs text-white focus:border-indigo-500 outline-none placeholder-slate-600"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lesson-duration",className:"block text-[10px] uppercase text-slate-400 font-bold mb-1",children:"Durée (MM:SS)"}),a.jsx("input",{id:"lesson-duration",value:j,onChange:e=>v(e.target.value),placeholder:"00:00",className:"w-full bg-slate-800 border border-slate-600 rounded p-2 text-xs text-white focus:border-indigo-500 outline-none placeholder-slate-600"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lesson-url",className:"block text-[10px] uppercase text-slate-400 font-bold mb-1",children:"URL Vidéo * (Mp4 / Vimeo / Mux)"}),a.jsx("input",{id:"lesson-url",value:b,onChange:e=>g(e.target.value),placeholder:"https://...",className:"w-full bg-slate-800 border border-slate-600 rounded p-2 text-xs text-white focus:border-indigo-500 outline-none placeholder-slate-600"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lesson-description",className:"block text-[10px] uppercase text-slate-400 font-bold mb-1",children:"Description / Notes"}),a.jsx("textarea",{id:"lesson-description",value:N,onChange:e=>w(e.target.value),placeholder:"Description visible sous la vidéo...",rows:2,className:"w-full bg-slate-800 border border-slate-600 rounded p-2 text-xs text-white focus:border-indigo-500 outline-none placeholder-slate-600 resize-none"})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-slate-800 mt-2",children:[a.jsx("button",{onClick:()=>u(null),className:"px-3 py-1.5 text-xs text-slate-400 hover:text-white transition",children:"Annuler"}),a.jsxs("button",{onClick:y,disabled:!h||!b,className:"px-4 py-1.5 rounded text-xs font-bold text-white transition flex items-center shadow-md "+(h&&b?"bg-green-600 hover:bg-green-500":"bg-slate-700 text-slate-300 cursor-not-allowed"),children:[a.jsx(C,{className:"w-3 h-3 mr-1"})," Enregistrer la leçon"]})]})]})]}),a.jsxs("div",{className:"divide-y divide-slate-700/50",children:[t.lessons.map((s,r)=>a.jsxs("div",{className:"p-3 flex items-center justify-between hover:bg-slate-700/30 transition group",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+("published"===s.status?"bg-green-500/10":"bg-slate-700"),children:a.jsx(A,{className:"w-4 h-4 "+("published"===s.status?"text-green-500":"text-slate-400")})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-200 font-medium group-hover:text-white",children:s.title}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-400",children:[a.jsx("span",{children:s.duration||"--:--"}),a.jsx("span",{children:"•"}),a.jsx("span",{className:"uppercase",children:s.provider})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase border tracking-wider "+("published"===s.status?"bg-green-500/10 text-green-500 border-green-500/30":"bg-orange-500/10 text-orange-500 border-orange-500/30"),children:"published"===s.status?"Publié":"Brouillon"}),a.jsx("button",{onClick:()=>o(e.id,t.id,s.id,"published"===s.status?"draft":"published"),className:"p-1.5 rounded hover:bg-slate-700 text-slate-400 hover:text-white transition",title:"published"===s.status?"Dépublier":"Publier",children:"published"===s.status?a.jsx(F,{className:"w-4 h-4"}):a.jsx(f,{className:"w-4 h-4"})})]})]},s.id)),0===t.lessons.length&&a.jsxs("div",{className:"p-4 text-center",children:[a.jsx("p",{className:"text-xs text-slate-600 italic mb-2",children:"Aucune leçon dans ce module"}),a.jsx("button",{onClick:()=>u(t.id),className:"text-xs text-indigo-400 hover:text-indigo-300 underline",children:"Ajouter la première leçon"})]})]})]},t.id)),(!(null==d?void 0:d.modules)||0===d.modules.length)&&a.jsxs("div",{className:"text-center p-8 border border-dashed border-slate-700 rounded-lg bg-slate-900/30",children:[a.jsx(k,{className:"w-10 h-10 text-slate-600 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Ce produit n'a pas encore de structure vidéo."}),a.jsx("p",{className:"text-slate-600 text-xs mt-1",children:"Commencez par ajouter un module ci-dessus."})]})]})]})},O=({product:e})=>{const{updateProductDetails:s,uploadProductResource:r,updateResourceStatus:n}=t(),o=l.useRef(null),d=l.useRef(null),[c,x]=l.useState(e.title),[m,u]=l.useState(e.description),[h,p]=l.useState(e.price),[g,j]=l.useState(e.features.join("\n")),[f,v]=l.useState(e.image),[N,C]=l.useState(!1),[P,A]=l.useState(!1),[F,I]=l.useState(!1),[R,L]=l.useState(!1),[O,M]=l.useState(!1),[_,E]=l.useState("");l.useEffect(()=>{x(e.title),u(e.description),p(e.price),j(e.features.join("\n")),v(e.image),C(!1)},[e]);const V=(e,t)=>{e(t),C(!0),E("")},U=async e=>{if(e){if(!e.type.startsWith("image/"))return void alert("Veuillez sélectionner un fichier image valide.");A(!0);try{const t=await((e,t=800,s=600,a=.6)=>new Promise((r,l)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=e=>{var i;const n=new Image;n.src=null==(i=e.target)?void 0:i.result,n.onload=()=>{const e=document.createElement("canvas");e.width=t,e.height=s;const i=e.getContext("2d");if(!i)return void l("Canvas context error");i.fillStyle="#FFFFFF",i.fillRect(0,0,e.width,e.height);const o=Math.max(t/n.width,s/n.height),d=n.width*o,c=n.height*o,x=(t-d)/2,m=(s-c)/2;i.drawImage(n,x,m,d,c);const u=e.toDataURL("image/jpeg",a);r(u)},n.onerror=e=>l(e)},i.onerror=e=>l(e)}))(e,800,600,.6);v(t),C(!0),E("")}catch(t){alert("Impossible de traiter l'image.")}finally{A(!1),L(!1)}}};return a.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 space-y-6",children:[a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("div",{className:"w-1/3 space-y-2",children:[a.jsxs("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden border-2 border-dashed transition-all group cursor-pointer "+(R?"border-orange-500 bg-orange-500/10":"border-slate-600 bg-slate-900 hover:border-slate-500"),onDragOver:e=>{e.preventDefault(),L(!0)},onDragLeave:e=>{e.preventDefault(),L(!1)},onDrop:e=>{var t;e.preventDefault(),L(!1),U(null==(t=e.dataTransfer.files)?void 0:t[0])},onClick:()=>{var e;return null==(e=o.current)?void 0:e.click()},children:[a.jsx("img",{src:f,alt:"Preview",className:"w-full h-full object-cover opacity-60 group-hover:opacity-40 transition"}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 opacity-0 group-hover:opacity-100 transition",children:[a.jsx(b,{className:"w-8 h-8 mb-2"}),a.jsx("span",{className:"text-xs font-bold uppercase",children:"Changer l'image"})]}),P&&a.jsx("div",{className:"absolute inset-0 bg-slate-900/80 flex items-center justify-center",children:a.jsx(i,{className:"w-8 h-8 text-orange-500 animate-spin"})})]}),a.jsx("input",{type:"file",ref:o,onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];s&&U(s)},className:"hidden",accept:"image/*","aria-label":"Télécharger l'image du produit",title:"Télécharger l'image du produit"})]}),a.jsxs("div",{className:"flex-1 space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{htmlFor:"product-title",className:"text-xs text-slate-400 font-bold uppercase mb-1 block",children:"Titre du produit"}),a.jsx("input",{id:"product-title",value:c,onChange:e=>V(x,e.target.value),"aria-label":"Titre du produit",title:"Titre du produit",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-white focus:border-orange-500 outline-none font-bold"})]}),a.jsxs("div",{className:"w-24",children:[a.jsx("label",{htmlFor:"product-price",className:"text-xs text-slate-400 font-bold uppercase mb-1 block",children:"Prix (€)"}),a.jsx("input",{id:"product-price",type:"number",value:h,onChange:e=>V(p,e.target.value),"aria-label":"Prix en euros",title:"Prix du produit en euros",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-white focus:border-orange-500 outline-none text-right"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 font-bold uppercase mb-1 block",children:"Description courte"}),a.jsx("textarea",{value:m,onChange:e=>V(u,e.target.value),rows:2,"aria-label":"Description du produit",title:"Description courte du produit",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm text-slate-300 focus:border-orange-500 outline-none resize-none"})]}),a.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-700",children:[a.jsxs("label",{className:"text-xs text-slate-400 font-bold uppercase mb-2 block flex items-center",children:[a.jsx(w,{className:"w-4 h-4 mr-2"}),"Ressource PDF Associée"]}),e.currentResource?a.jsxs("div",{className:"flex items-center justify-between bg-slate-800 p-3 rounded border border-slate-600",children:[a.jsxs("div",{className:"flex items-center",children:["published"===e.currentResource.status?a.jsx(y,{className:"w-5 h-5 text-green-500 mr-3"}):a.jsx(D,{className:"w-5 h-5 text-orange-500 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-white font-medium",children:e.currentResource.fileName}),a.jsxs("p",{className:"text-xs text-slate-500",children:["v",e.currentResource.version," • ",e.currentResource.fileSize]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"px-2 py-1 rounded text-xs font-bold uppercase "+("published"===e.currentResource.status?"bg-green-500/20 text-green-500 border border-green-500/30":"bg-orange-500/20 text-orange-500 border border-orange-500/30"),children:"published"===e.currentResource.status?"PUBLIÉ":"BROUILLON"}),a.jsx("button",{onClick:()=>{if(!e.currentResource)return;const t="draft"===e.currentResource.status?"published":"draft";n(e.id,t)},className:"text-xs text-slate-400 hover:text-white underline",children:"published"===e.currentResource.status?"Passer en brouillon":"Publier"})]})]}):a.jsx("div",{className:"border border-dashed border-slate-600 rounded p-4 text-center hover:bg-slate-800 transition cursor-pointer",onClick:()=>{var e;return null==(e=d.current)?void 0:e.click()},children:F?a.jsxs("div",{className:"flex items-center justify-center text-orange-500",children:[a.jsx(i,{className:"w-4 h-4 animate-spin mr-2"}),"Téléversement..."]}):a.jsxs("div",{className:"text-slate-400 text-sm",children:[a.jsx(b,{className:"w-4 h-4 mx-auto mb-1"}),"Cliquez pour ajouter un PDF"]})}),a.jsx("input",{type:"file",ref:d,onChange:async t=>{var s;const a=null==(s=t.target.files)?void 0:s[0];if(a)if("application/pdf"===a.type){I(!0);try{await r(e.id,a),E("PDF téléversé !")}catch(l){alert("Erreur upload PDF")}finally{I(!1)}}else alert("Format PDF uniquement.")},className:"hidden",accept:"application/pdf","aria-label":"Télécharger le PDF du produit",title:"Télécharger le PDF du produit"})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-700 mt-4",children:[a.jsxs("button",{onClick:()=>M(!O),className:"text-indigo-400 text-sm font-bold flex items-center hover:text-indigo-300",children:[a.jsx(k,{className:"w-4 h-4 mr-2"}),O?"Masquer le Programme Vidéo":"Gérer le Programme Vidéo"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-green-500 text-sm font-bold animate-fade-in",children:_}),a.jsxs("button",{onClick:()=>{s(e.id,{title:c,description:m,price:Number(h),features:g.split("\n").filter(e=>""!==e.trim()),image:f}),C(!1),E("Sauvegardé !"),setTimeout(()=>E(""),3e3)},disabled:!N,className:"px-4 py-2 rounded font-bold text-sm flex items-center transition "+(N?"bg-orange-600 text-white hover:bg-orange-500":"bg-slate-700 text-slate-300 cursor-not-allowed"),children:[a.jsx(S,{className:"w-4 h-4 mr-2"}),"Enregistrer"]})]})]})]})]}),O&&a.jsx(T,{product:e})]})},M=({currentUser:e,onLogout:w})=>{const[y,D]=l.useState("overview"),[k,S]=l.useState(null),{products:C}=t(),{testimonials:P,toggleApproval:A,deleteTestimonial:F}=s();return l.useEffect(()=>{(async()=>(await new Promise(e=>setTimeout(e,600)),{revenue:I.reduce((e,t)=>e+100*t.purchasedProductIds.length,0),clients:I.filter(e=>"user"===e.role&&"active"===e.status).length,conversionRate:3.4,salesTrend:Array.from({length:14}).map((e,t)=>{const s=new Date;return s.setDate(s.getDate()-(13-t)),{date:s.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),amount:100*Math.floor(5*Math.random())}}),users:I,logs:R}))().then(S)},[]),k?a.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-200 font-sans selection:bg-orange-500/30",children:[a.jsxs("aside",{className:"fixed left-0 top-0 bottom-0 w-64 bg-slate-900 border-r border-slate-800 flex flex-col z-20",children:[a.jsxs("div",{className:"h-20 flex items-center px-6 border-b border-slate-800",children:[a.jsx("img",{src:r,className:"w-8 h-8 mr-3",alt:"Logo"}),a.jsxs("span",{className:"font-bold text-white tracking-wider",children:["MASTER",a.jsx("span",{className:"text-orange-500",children:"ADMIN"})]})]}),a.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[a.jsxs("button",{onClick:()=>D("overview"),className:"w-full flex items-center px-4 py-3 rounded-lg transition "+("overview"===y?"bg-orange-600 text-white shadow-lg shadow-orange-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"),children:[a.jsx(n,{className:"w-5 h-5 mr-3"})," Vue d'ensemble"]}),a.jsxs("button",{onClick:()=>D("products"),className:"w-full flex items-center px-4 py-3 rounded-lg transition "+("products"===y?"bg-orange-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"),children:[a.jsx(o,{className:"w-5 h-5 mr-3"})," Produits & PDF"]}),a.jsxs("button",{onClick:()=>D("users"),className:"w-full flex items-center px-4 py-3 rounded-lg transition "+("users"===y?"bg-orange-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"),children:[a.jsx(d,{className:"w-5 h-5 mr-3"})," Clients"]}),a.jsxs("button",{onClick:()=>D("settings"),className:"w-full flex items-center px-4 py-3 rounded-lg transition "+("settings"===y?"bg-orange-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"),children:[a.jsx(c,{className:"w-5 h-5 mr-3"})," Avis & Config"]})]}),a.jsxs("div",{className:"p-4 border-t border-slate-800",children:[a.jsxs("div",{className:"flex items-center mb-4 px-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-xs font-bold text-white",children:e.name.charAt(0)}),a.jsxs("div",{className:"ml-3 overflow-hidden",children:[a.jsx("p",{className:"text-sm font-bold text-white truncate",children:e.name}),a.jsxs("p",{className:"text-xs text-green-500 flex items-center",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 mr-1.5"})," En ligne"]})]})]}),a.jsxs("button",{onClick:w,className:"w-full flex items-center justify-center px-4 py-2 border border-slate-700 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition text-sm",children:[a.jsx(x,{className:"w-4 h-4 mr-2"})," Déconnexion"]})]})]}),a.jsxs("main",{className:"ml-64 p-8",children:["overview"===y&&a.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Tableau de bord"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-2xl relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:a.jsx(m,{className:"w-16 h-16 text-emerald-500"})}),a.jsx("p",{className:"text-slate-400 text-sm font-medium uppercase tracking-wider",children:"Chiffre d'affaires"}),a.jsxs("h3",{className:"text-3xl font-bold text-white mt-1",children:[k.revenue," €"]}),a.jsxs("div",{className:"mt-4 flex items-center text-emerald-400 text-sm",children:[a.jsx(u,{className:"w-4 h-4 mr-1"})," +12% cette semaine"]})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-2xl relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:a.jsx(d,{className:"w-16 h-16 text-blue-500"})}),a.jsx("p",{className:"text-slate-400 text-sm font-medium uppercase tracking-wider",children:"Clients Actifs"}),a.jsx("h3",{className:"text-3xl font-bold text-white mt-1",children:k.clients}),a.jsxs("div",{className:"mt-4 flex items-center text-blue-400 text-sm",children:[a.jsx(h,{className:"w-4 h-4 mr-1"})," 5 nouveaux aujourd'hui"]})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-2xl relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:a.jsx(p,{className:"w-16 h-16 text-orange-500"})}),a.jsx("p",{className:"text-slate-400 text-sm font-medium uppercase tracking-wider",children:"Sécurité"}),a.jsx("h3",{className:"text-3xl font-bold text-white mt-1",children:"Sécurisé"}),a.jsxs("div",{className:"mt-4 flex items-center text-orange-400 text-sm",children:[a.jsx(p,{className:"w-4 h-4 mr-1"})," 0 tentative d'intrusion"]})]})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Évolution des Ventes (14 jours)"}),a.jsx(L,{data:k.salesTrend})]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-800",children:a.jsx("h3",{className:"text-lg font-bold text-white",children:"Logs Système Récents"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[a.jsx("thead",{className:"bg-slate-950/50 text-slate-400 uppercase font-bold text-xs",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Horodatage"}),a.jsx("th",{className:"p-4",children:"Utilisateur"}),a.jsx("th",{className:"p-4",children:"Action"}),a.jsx("th",{className:"p-4",children:"IP"}),a.jsx("th",{className:"p-4",children:"Détails"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-800",children:k.logs.map(e=>a.jsxs("tr",{className:"hover:bg-slate-800/50 transition",children:[a.jsx("td",{className:"p-4 font-mono text-xs",children:new Date(e.timestamp).toLocaleString()}),a.jsx("td",{className:"p-4 text-white font-medium",children:e.userId}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold "+("danger"===e.severity?"bg-red-500/10 text-red-500":"warning"===e.severity?"bg-orange-500/10 text-orange-500":"bg-blue-500/10 text-blue-500"),children:e.action})}),a.jsx("td",{className:"p-4 font-mono text-xs text-slate-400",children:e.ip}),a.jsx("td",{className:"p-4",children:e.details})]},e.id))})]})})]})]}),"products"===y&&a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Gestion du Catalogue"}),a.jsxs("button",{className:"px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg font-bold text-sm flex items-center",children:[a.jsx(b,{className:"w-4 h-4 mr-2"})," Nouveau Produit"]})]}),a.jsx("div",{className:"space-y-8",children:C.map(e=>a.jsx(O,{product:e},e.id))})]}),"settings"===y&&a.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center",children:[a.jsx(c,{className:"w-6 h-6 mr-3 text-indigo-500"}),"Modération & Configuration"]}),a.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden shadow-xl",children:[a.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center",children:[a.jsxs("h3",{className:"text-lg font-bold text-white",children:["Avis Clients (",P.length,")"]}),a.jsxs("div",{className:"flex gap-2 text-xs",children:[a.jsxs("span",{className:"bg-orange-500/10 text-orange-500 px-2 py-1 rounded border border-orange-500/30",children:[P.filter(e=>!e.approved).length," En attente"]}),a.jsxs("span",{className:"bg-green-500/10 text-green-500 px-2 py-1 rounded border border-green-500/30",children:[P.filter(e=>e.approved).length," Publiés"]})]})]}),a.jsxs("div",{className:"divide-y divide-slate-800",children:[P.map(e=>a.jsxs("div",{className:"p-6 flex items-start justify-between transition "+(e.approved?"bg-slate-900":"bg-orange-950/10 hover:bg-orange-900/10"),children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-bold "+(e.approved?"text-white":"text-orange-200"),children:e.name}),e.role&&a.jsx("span",{className:"text-xs text-slate-400 bg-slate-800 px-1.5 py-0.5 rounded",children:e.role}),a.jsx("div",{className:"flex text-orange-500 ml-2",children:[...Array(5)].map((t,s)=>a.jsx(g,{className:"w-3 h-3 "+(s<e.rating?"fill-current":"text-slate-700")},s))})]}),a.jsxs("p",{className:"text-slate-300 text-sm italic mb-2",children:['"',e.text,'"']}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600",children:[a.jsx("span",{children:new Date(e.date).toLocaleDateString()}),a.jsx("span",{className:"uppercase tracking-wider",children:e.source}),!e.approved&&a.jsxs("span",{className:"text-orange-500 font-bold flex items-center",children:[a.jsx(j,{className:"w-3 h-3 mr-1"})," Validation requise"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>A(e.id),className:"px-3 py-1.5 rounded-lg border flex items-center gap-2 transition text-xs font-bold "+(e.approved?"bg-green-500/10 border-green-500/30 text-green-500 hover:bg-green-500/20":"bg-orange-500 text-white border-orange-600 hover:bg-orange-400 shadow-lg shadow-orange-900/20"),children:e.approved?a.jsxs(a.Fragment,{children:[a.jsx(f,{className:"w-3 h-3"})," Publié"]}):a.jsxs(a.Fragment,{children:[a.jsx(v,{className:"w-3 h-3"})," Valider"]})}),a.jsx("button",{onClick:()=>F(e.id),className:"p-2 rounded-lg border border-red-900/30 text-red-500 hover:bg-red-900/20 transition hover:text-red-400",title:"Supprimer définitivement",children:a.jsx(N,{className:"w-4 h-4"})})]})]},e.id)),0===P.length&&a.jsx("div",{className:"p-8 text-center text-slate-500 text-sm",children:"Aucun avis pour le moment."})]})]})]})]})]}):a.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:a.jsx(i,{className:"w-8 h-8 text-orange-500 animate-spin"})})};export{M as AdminDashboard};
