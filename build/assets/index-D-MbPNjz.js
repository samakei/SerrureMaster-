const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-xx7WiZ9A.js","assets/react-vendor-C11u62No.js","assets/icons-Dm7DizZI.js","assets/supabase-DUEh_P_2.js","assets/AdminDashboard-BLBdFlKA.js","assets/CoursePlayer-ruEKvhGC.js","assets/CGV-cbWJtRlW.js","assets/PrivacyPolicy-CQiLMhh4.js","assets/CookiesPolicy-DCGR8YY5.js"])))=>i.map(i=>d[i]);
var e,t,s,r=Object.defineProperty;import{r as a,a as n,R as i}from"./react-vendor-C11u62No.js";import{S as l,X as o,a as c,T as d,b as u,P as m,c as x,A as h,C as p,U as f,L as g,M as b,d as N,e as E,f as v,g as _,h as j,F as I,i as y,j as w,B as T,k as A,l as S,m as O,n as R,o as C,W as D,Z as L,p as P,q as U,r as M,s as k,Q as F,t as G,u as B,v as H,w as V,x as q,y as Y,z as K,D as z,E as $,R as J}from"./icons-Dm7DizZI.js";import{c as W}from"./supabase-DUEh_P_2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var X={exports:{}},Z={},Q=a,ee=Symbol.for("react.element"),te=Symbol.for("react.fragment"),se=Object.prototype.hasOwnProperty,re=Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ae={key:!0,ref:!0,__self:!0,__source:!0};function ne(e,t,s){var r,a={},n=null,i=null;for(r in void 0!==s&&(n=""+s),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(i=t.ref),t)se.call(t,r)&&!ae.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:ee,type:e,key:n,ref:i,props:a,_owner:re.current}}Z.Fragment=te,Z.jsx=ne,Z.jsxs=ne,X.exports=Z;var ie=X.exports,le={},oe=n;le.createRoot=oe.createRoot,le.hydrateRoot=oe.hydrateRoot;const ce={},de=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in ce)return;ce[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,s&&a.setAttribute("nonce",s),document.head.appendChild(a),t?new Promise((t,s)=>{a.addEventListener("load",t),a.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},ue=a.createContext(void 0),me=({children:e})=>{const[t,s]=a.useState([]),[r,n]=a.useState(!1),[i,l]=a.useState(!1);a.useEffect(()=>{const e=localStorage.getItem("serrure_master_cart");if(e)try{s(JSON.parse(e))}catch(t){}l(!0)},[]),a.useEffect(()=>{i&&localStorage.setItem("serrure_master_cart",JSON.stringify(t))},[t,i]);const o=t.some(e=>"p1_door_slammed"===e.id),c=t.some(e=>"p4_security_pack"===e.id),d=t.reduce((e,t)=>e+t.price*t.quantity,0);let u=0;o&&c&&(u=50);const m=Math.max(0,d-u),x=t.reduce((e,t)=>e+t.quantity,0);return ie.jsx(ue.Provider,{value:{items:t,isOpen:r,addToCart:e=>{s(t=>t.find(t=>t.id===e.id)?"p6_survival_kit"===e.id?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):t:[...t,{...e,quantity:1,addedAt:Date.now()}]),n(!0)},removeFromCart:e=>{s(t=>t.filter(t=>t.id!==e))},toggleCart:()=>n(e=>!e),clearCart:()=>{s([]),n(!1)},total:m,subtotal:d,discount:u,count:x},children:e})},xe=()=>{const e=a.useContext(ue);if(void 0===e)throw new Error("useCart must be used within a CartProvider");return e};var he=(e=>(e.PDF="PDF",e.VIDEO="VIDEO",e.BUNDLE="BUNDLE",e))(he||{});const pe="SerrureMaster",fe="/images/p1.jpg",ge=[{id:"p1_door_slammed",title:"Urgence : Porte Claquée",description:"Un plan structuré pour analyser une porte claquée, comprendre les techniques professionnelles d’ouverture fine et éviter les erreurs irréversibles. Économisez jusqu’à 400€ de dépannage en tentant l’intervention dans le cadre légal et technique approprié.",price:100,originalPrice:500,features:["Vidéo HD : technique professionnelle sans perçage","PDF Diagnostic : vérifier si la porte est réellement claquée","Guide pratique : gestes autorisés / gestes interdits","Assistance WhatsApp incluse (validation ou STOP immédiat)"],compatibility:{valid:["Porte claquée (non verrouillée)","Porte blindée claquée sans verrouillage"],invalid:["Porte fermée à clé (verrouillée)"]},type:he.BUNDLE,image:"/images/p1.jpg",stripePriceId:"price_1PqXyZA2eZvKYlo2kR9uWq5a",currentResource:{id:"res_p1_v1",productId:"p1_door_slammed",fileName:"Guide_Ouverture_Radio_Pro_v1.pdf",filePath:"secure-pdfs/p1/guide.pdf",fileSize:"2.4 MB",status:"published",version:1,lastUpdated:"2023-11-15T10:00:00Z"}},{id:"p2_key_broken",title:"Clé Cassée dans le Barillet",description:"Formation vidéo pour comprendre comment tenter une extraction sécurisée du fragment cassé, sans aggraver le blocage. Identifiez quand intervenir et quand arrêter pour préserver votre cylindre. Assistance WhatsApp pour validation visuelle.",price:100,originalPrice:500,features:["Vidéo HD : protocole d’extraction sécurisé","Guide PDF : cas autorisés / cas interdits","Section “STOP” : quand ne surtout pas insister","Assistance WhatsApp incluse (validation sur photo)"],compatibility:{valid:["Clé cassée visible ou accessible"],invalid:["Cylindre bloqué ou endommagé","Tentative déjà forcée"]},type:he.BUNDLE,image:"/images/p2.jpg",stripePriceId:"price_1PqXzQB2eZvKYlo2mL8vTq4b",currentResource:{id:"res_p2_v1_draft",productId:"p2_key_broken",fileName:"Guide_Extraction_Key_DRAFT.pdf",filePath:"secure-pdfs/p2/draft.pdf",fileSize:"1.8 MB",status:"draft",version:.9,lastUpdated:"2023-12-20T14:30:00Z"}},{id:"p3_cylinder_replace",title:"Remplacer son Cylindre",description:"Tutoriel technique pour changer un cylindre standard sans erreur de mesure ni main-d’œuvre excessive. Comprendre les dimensions critiques, les outils nécessaires et les pièges à éviter. Idéal après emménagement ou mise à niveau de sécurité.",price:100,originalPrice:500,features:["Tutoriel vidéo : démontage sécurisé","PDF mesures exactes (intérieur / extérieur)","Checklist outils nécessaires (basiques)","Assistance WhatsApp en cas de doute"],compatibility:{valid:["Cylindre standard"],invalid:["Serrure spécifique ou système complexe"]},type:he.VIDEO,image:"/images/p3.jpg",stripePriceId:"price_1PqY1RC2eZvKYlo2nN7wUr3c",currentResource:null},{id:"p4_security_pack",title:"Changer sa Serrure Complète",description:"Formation complète pour remplacer une serrure entière sans main-d’œuvre professionnelle. Maîtrisez les mesures précises, le démontage sécurisé et les critères de sélection certifiés. Gain immédiat en autonomie et budget.",price:100,originalPrice:500,features:["Mesure précise avant achat","Démontage & remontage pas à pas (Vidéo)","Guide d’achat : critères A2P (sans marque imposée)","Assistance WhatsApp incluse"],compatibility:{valid:["Remplacement simple"],invalid:["Travaux lourds ou structurels"]},type:he.BUNDLE,image:"/images/p4.jpg",stripePriceId:"price_1PqY2SD2eZvKYlo2oP6xVs2d",currentResource:{id:"res_p4_v2",productId:"p4_security_pack",fileName:"Tuto_Remplacement_Serrure_v2.pdf",filePath:"secure-pdfs/p4/guide.pdf",fileSize:"3.1 MB",status:"published",version:2,lastUpdated:"2023-10-05T09:00:00Z"}},{id:"p5_audit_security",title:"Audit Sécurité & Renforcement",description:"Méthodologie professionnelle pour évaluer vos vulnérabilités et prioriser les renforcements efficaces sans travaux lourds. Obtenez un plan d’action personnalisé avec budget maîtrisé et assistance technique pour validation à distance.",price:100,originalPrice:500,features:["Audit guidé (photos + questionnaire)","Plan d’action priorisé (24h / 7j / 30j)","Budget maîtrisé & erreurs à éviter","Assistance WhatsApp de validation"],compatibility:{valid:["Logement ou local standard"],invalid:["Travaux de blindage structurel"]},type:he.BUNDLE,image:"/images/p5.jpg",stripePriceId:"price_1PqY3TE2eZvKYlo2qR5yWt1e",currentResource:null},{id:"p6_survival_kit",title:"Pack : Kit de Prévention",description:"Sélection professionnelle du matériel indispensable pour gérer les situations courantes sans stress. Liste vérifiée, liens d’achat directs, aucun gadget inutile. Économie immédiate garantie.",price:29,originalPrice:145,features:["Liens d’achat directs (qualité pro)","Matériel réellement utile (pas de gadgets)","Économie immédiate"],type:he.BUNDLE,image:"/images/p6.jpg",stripePriceId:"price_1PqY4UF2eZvKYlo2rS4zXu0f",currentResource:{id:"res_p6_kit",productId:"p6_survival_kit",fileName:"Liste_Materiel_Pro.pdf",filePath:"secure-pdfs/p6/list.pdf",fileSize:"0.5 MB",status:"published",version:1,lastUpdated:"2023-09-01T12:00:00Z"}}],be="user_123_abc",Ne={p1_door_slammed:{productId:"p1_door_slammed",modules:[{id:"m1_safety",title:"Module 1 : Analyse & Sécurité (OBLIGATOIRE)",status:"published",lessons:[{id:"l1_intro",title:"STOP - Diagnostic immédiat",duration:"02:15",videoUrl:"https://www.w3schools.com/html/mov_bbb.mp4",provider:"native",status:"published",description:"Ne touchez à rien avant d'avoir vérifié ces 3 points cruciaux pour ne pas aggraver la situation.",checklist:["Vérifier que la porte n'est pas verrouillée","Vérifier l'état de la poignée","S'assurer d'être le locataire/propriétaire"]},{id:"l2_legal",title:"Cadre légal & Responsabilité",duration:"01:45",videoUrl:"https://www.w3schools.com/html/mov_bbb.mp4",provider:"native",status:"published",description:"Rappel rapide de vos droits et devoirs avant d'intervenir."}]},{id:"m2_technique",title:"Module 2 : La Technique Radio",status:"published",lessons:[{id:"l3_tools",title:"Préparer votre outil (Radio ou Bouteille)",duration:"03:30",videoUrl:"https://www.w3schools.com/html/mov_bbb.mp4",provider:"native",status:"published",description:"Comment découper une bouteille en plastique si vous n'avez pas de radio médicale.",checklist:["Découpe propre sans bavure","Taille idéale : 15cm x 10cm","Lubrifiant (Savon/Huile)"]},{id:"l4_gesture",title:"Le Geste : Angle et Vibration",duration:"05:10",videoUrl:"https://www.w3schools.com/html/mov_bbb.mp4",provider:"native",status:"published",description:"Le mouvement exact pour faire glisser le pêne. Regardez bien la position des mains.",checklist:["Insérer par le bas ou le haut","Faire vibrer la porte","Pousser et tirer simultanément"]},{id:"l5_double",title:"Cas particulier : Double feuillure",duration:"04:00",videoUrl:"https://www.w3schools.com/html/mov_bbb.mp4",provider:"native",status:"draft",description:"La technique adaptée pour les portes blindées ou modernes avec décrochement."}]},{id:"m3_troubleshoot",title:"Module 3 : En cas d'échec",status:"published",lessons:[{id:"l6_errors",title:"Les 3 erreurs qui bloquent tout",duration:"02:50",videoUrl:"https://www.w3schools.com/html/mov_bbb.mp4",provider:"native",status:"published",description:"Si ça ne s'ouvre pas, c'est probablement à cause de l'un de ces détails."},{id:"l7_abandon",title:"Quand faut-il abandonner ?",duration:"01:30",videoUrl:"https://www.w3schools.com/html/mov_bbb.mp4",provider:"native",status:"published",description:"Savoir s'arrêter avant de casser la serrure et que ça coûte 1000€."}]}]}},Ee=({onCheckout:e})=>{const{items:t,isOpen:s,toggleCart:r,removeFromCart:a,total:n,subtotal:i,discount:f,addToCart:g}=xe(),b=t.some(e=>"p1_door_slammed"===e.id),N=t.some(e=>"p4_security_pack"===e.id),E=b&&!N,v=ge.find(e=>"p4_security_pack"===e.id);return s?ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[60] transition-opacity",onClick:r}),ie.jsxs("div",{className:"fixed inset-y-0 right-0 z-[70] w-full sm:max-w-md bg-slate-900 border-l border-slate-700 shadow-2xl transform transition-transform duration-300 ease-in-out flex flex-col",children:[ie.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-800 bg-slate-900",children:[ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx(l,{className:"w-6 h-6 text-orange-500"}),ie.jsx("h2",{className:"text-xl font-bold text-white",children:"Votre Panier"}),ie.jsxs("span",{className:"bg-slate-800 text-slate-300 text-xs px-2 py-1 rounded-full border border-slate-700",children:[t.length," article",t.length>1?"s":""]})]}),ie.jsx("button",{onClick:r,"aria-label":"Fermer le panier",className:"text-slate-400 hover:text-white transition p-2 hover:bg-slate-800 rounded-full",children:ie.jsx(o,{className:"w-6 h-6"})})]}),ie.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:0===t.length?ie.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center space-y-4 opacity-60",children:[ie.jsx("div",{className:"bg-slate-800 p-6 rounded-full",children:ie.jsx(l,{className:"w-12 h-12 text-slate-400"})}),ie.jsx("p",{className:"text-slate-200 font-medium",children:"Votre panier est vide."}),ie.jsx("button",{onClick:r,className:"text-orange-500 hover:text-orange-400 underline",children:"Découvrir nos guides"})]}):ie.jsxs(ie.Fragment,{children:[t.map(e=>ie.jsxs("div",{className:"group relative flex bg-slate-800/50 rounded-xl border border-slate-700 p-3 hover:border-orange-500/30 transition-all",children:[ie.jsx("div",{className:"h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg bg-slate-900 border border-slate-700",children:ie.jsx("img",{src:e.image,alt:e.title,className:"h-full w-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"})}),ie.jsxs("div",{className:"ml-4 flex flex-1 flex-col justify-between",children:[ie.jsxs("div",{children:[ie.jsxs("div",{className:"flex justify-between",children:[ie.jsx("h3",{className:"text-sm font-bold text-white line-clamp-2 pr-4",children:e.title}),ie.jsxs("p",{className:"text-sm font-bold text-orange-400",children:[e.price,"€"]})]}),ie.jsx("p",{className:"mt-1 text-xs text-slate-400 line-clamp-1",children:e.description})]}),ie.jsxs("div",{className:"flex justify-between items-end mt-2",children:[ie.jsxs("div",{className:"text-xs text-slate-400 font-mono flex items-center",children:["BUNDLE"===e.type&&ie.jsx(c,{className:"w-3 h-3 mr-1 text-green-500"}),e.type]}),ie.jsxs("button",{onClick:()=>a(e.id),"aria-label":`Retirer ${e.title} du panier`,className:"text-slate-400 hover:text-red-400 transition flex items-center text-xs group/btn",children:[ie.jsx(d,{className:"w-4 h-4 mr-1"}),ie.jsx("span",{className:"opacity-0 group-hover/btn:opacity-100 transition-opacity",children:"Retirer"})]})]})]})]},e.id)),E&&v&&ie.jsx("div",{className:"mt-6 border-t border-slate-700 pt-6 animate-fade-in-up",children:ie.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-4 border border-orange-500/30 shadow-[0_0_15px_-3px_rgba(249,115,22,0.15)] relative overflow-hidden",children:[ie.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:ie.jsx(c,{className:"w-24 h-24 text-orange-500"})}),ie.jsxs("div",{className:"relative z-10",children:[ie.jsxs("div",{className:"flex items-center mb-2",children:[ie.jsx(u,{className:"w-4 h-4 text-orange-400 mr-2 animate-pulse"}),ie.jsx("span",{className:"text-xs font-bold text-orange-400 uppercase tracking-wider",children:"Offre Spéciale Sécurité"})]}),ie.jsx("h4",{className:"text-white font-bold text-sm mb-1",children:"Sécurisez votre porte après ouverture"}),ie.jsxs("p",{className:"text-slate-200 text-xs mb-3",children:['Ajoutez le pack "Changer sa serrure" pour seulement'," ",ie.jsx("span",{className:"text-white font-bold underline",children:"50€"})," (au lieu de 100€)."]}),ie.jsxs("button",{onClick:()=>g(v),className:"w-full py-2 bg-orange-600 hover:bg-orange-500 text-white text-xs font-bold rounded-lg transition-colors flex items-center justify-center",children:[ie.jsx(m,{className:"w-3 h-3 mr-1"}),"Ajouter le pack (+50€ seulement)"]})]})]})})]})}),t.length>0&&ie.jsxs("div",{className:"border-t border-slate-800 bg-slate-900 p-6 space-y-4",children:[ie.jsxs("div",{className:"space-y-2",children:[ie.jsxs("div",{className:"flex justify-between text-sm text-slate-400",children:[ie.jsx("span",{children:"Sous-total"}),ie.jsxs("span",{children:[i,"€"]})]}),f>0&&ie.jsxs("div",{className:"flex justify-between text-sm text-green-400 font-medium",children:[ie.jsxs("span",{className:"flex items-center",children:[ie.jsx(x,{className:"w-3 h-3 mr-1"})," Remise Bundle"]}),ie.jsxs("span",{children:["-",f,"€"]})]}),ie.jsxs("div",{className:"flex justify-between text-sm text-slate-400",children:[ie.jsx("span",{children:"Taxes (estimées)"}),ie.jsx("span",{children:"Incluses"})]}),ie.jsxs("div",{className:"flex justify-between text-xl font-bold text-white pt-2 border-t border-slate-800",children:[ie.jsx("span",{children:"Total"}),ie.jsxs("span",{className:"text-orange-500",children:[n,"€"]})]})]}),ie.jsxs("button",{onClick:e,className:"w-full py-4 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white font-bold rounded-xl shadow-lg shadow-orange-900/20 transition-all transform hover:-translate-y-1 flex items-center justify-center group",children:[ie.jsx("span",{children:"Procéder au paiement"}),ie.jsx(h,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]}),ie.jsxs("div",{className:"flex justify-center items-center space-x-4 text-[10px] text-slate-300 mt-2",children:[ie.jsxs("span",{className:"flex items-center",children:[ie.jsx(c,{className:"w-3 h-3 mr-1"})," Paiement Sécurisé"]}),ie.jsxs("span",{className:"flex items-center",children:[ie.jsx(p,{className:"w-3 h-3 mr-1"})," Satisfait ou remboursé"]})]})]})]})]}):null},ve=({className:e})=>ie.jsxs("svg",{viewBox:"0 0 420 75",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,"aria-label":"Logo SerrureMaster",style:{filter:"drop-shadow(0 4px 12px rgba(249, 115, 22, 0.2))"},children:[ie.jsxs("defs",{children:[ie.jsxs("linearGradient",{id:"shield_modern_grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[ie.jsx("stop",{offset:"0%",style:{stopColor:"#f97316",stopOpacity:1}}),ie.jsx("stop",{offset:"50%",style:{stopColor:"#ec4899",stopOpacity:1}}),ie.jsx("stop",{offset:"100%",style:{stopColor:"#a855f7",stopOpacity:1}})]}),ie.jsxs("linearGradient",{id:"glow_cyan",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[ie.jsx("stop",{offset:"0%",style:{stopColor:"#06b6d4",stopOpacity:1}}),ie.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:1}})]}),ie.jsxs("linearGradient",{id:"glass_effect",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[ie.jsx("stop",{offset:"0%",style:{stopColor:"#ffffff",stopOpacity:.15}}),ie.jsx("stop",{offset:"100%",style:{stopColor:"#ffffff",stopOpacity:.05}})]}),ie.jsxs("filter",{id:"soft_glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[ie.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),ie.jsxs("feMerge",{children:[ie.jsx("feMergeNode",{in:"coloredBlur"}),ie.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),ie.jsxs("filter",{id:"inner_shadow",children:[ie.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),ie.jsx("feOffset",{dx:"0",dy:"2",result:"offsetblur"}),ie.jsx("feComponentTransfer",{children:ie.jsx("feFuncA",{type:"linear",slope:"0.4"})}),ie.jsxs("feMerge",{children:[ie.jsx("feMergeNode",{}),ie.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),ie.jsxs("g",{transform:"translate(10, 8)",children:[ie.jsx("path",{d:"M28 0 L50 11 V28 C50 42 40 55 28 60 C16 55 6 42 6 28 V11 L28 0 Z",fill:"url(#shield_modern_grad)",filter:"url(#soft_glow)",children:ie.jsx("animate",{attributeName:"opacity",values:"0.95;1;0.95",dur:"4s",repeatCount:"indefinite"})}),ie.jsx("path",{d:"M28 3 L47 12 V28 C47 40 38 52 28 56 C18 52 9 40 9 28 V12 L28 3 Z",fill:"url(#glass_effect)",opacity:"0.6"}),ie.jsx("path",{d:"M28 14 L38 22 V42 L28 50 L18 42 V22 L28 14 Z",fill:"#0a0f1e",opacity:"0.95",filter:"url(#inner_shadow)"}),ie.jsxs("g",{transform:"translate(28, 30)",filter:"url(#soft_glow)",children:[ie.jsx("rect",{x:"-5",y:"0",width:"10",height:"8",rx:"1.5",fill:"url(#glow_cyan)"}),ie.jsx("path",{d:"M-3 0 V-4 C-3 -5.65 -1.65 -7 0 -7 C1.65 -7 3 -5.65 3 -4 V0",stroke:"url(#glow_cyan)",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),ie.jsx("circle",{cx:"0",cy:"4",r:"1.5",fill:"#0a0f1e",children:ie.jsx("animate",{attributeName:"r",values:"1.5;2;1.5",dur:"2s",repeatCount:"indefinite"})}),ie.jsx("circle",{cx:"0",cy:"4",r:"1.5",fill:"url(#glow_cyan)",opacity:"0.6",children:ie.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0.3",dur:"2s",repeatCount:"indefinite"})})]}),ie.jsxs("g",{opacity:"0.7",children:[ie.jsx("circle",{cx:"55",cy:"15",r:"2.5",fill:"#06b6d4",children:ie.jsx("animate",{attributeName:"cy",values:"15;12;15",dur:"3s",repeatCount:"indefinite"})}),ie.jsx("circle",{cx:"58",cy:"25",r:"1.5",fill:"#ec4899",children:ie.jsx("animate",{attributeName:"cy",values:"25;22;25",dur:"2.5s",repeatCount:"indefinite"})}),ie.jsx("circle",{cx:"1",cy:"15",r:"2.5",fill:"#a855f7",children:ie.jsx("animate",{attributeName:"cy",values:"15;18;15",dur:"3.5s",repeatCount:"indefinite"})}),ie.jsx("circle",{cx:"-2",cy:"25",r:"1.5",fill:"#f97316",children:ie.jsx("animate",{attributeName:"cy",values:"25;28;25",dur:"2.8s",repeatCount:"indefinite"})})]}),ie.jsxs("g",{opacity:"0.5",strokeWidth:"1",strokeLinecap:"round",children:[ie.jsx("line",{x1:"50",y1:"15",x2:"55",y2:"15",stroke:"#06b6d4",children:ie.jsx("animate",{attributeName:"x2",values:"55;58;55",dur:"3s",repeatCount:"indefinite"})}),ie.jsx("line",{x1:"6",y1:"15",x2:"1",y2:"15",stroke:"#a855f7",children:ie.jsx("animate",{attributeName:"x2",values:"1;-2;1",dur:"3.5s",repeatCount:"indefinite"})})]})]}),ie.jsxs("g",{transform:"translate(85, 0)",children:[ie.jsxs("text",{x:"0",y:"36",fontFamily:"'Inter', sans-serif",fontWeight:"900",fontSize:"26",letterSpacing:"1.5",fill:"url(#shield_modern_grad)",style:{paintOrder:"stroke fill"},children:["SERRURE",ie.jsx("tspan",{fill:"#06b6d4",dx:"4",children:"MASTER"})]}),ie.jsxs("text",{x:"0",y:"35",fontFamily:"'Inter', sans-serif",fontWeight:"900",fontSize:"26",letterSpacing:"1.5",fill:"url(#glass_effect)",opacity:"0.8",children:["SERRURE",ie.jsx("tspan",{dx:"4",children:"MASTER"})]}),ie.jsxs("g",{transform:"translate(0, 45)",children:[ie.jsx("rect",{x:"0",y:"0",width:"120",height:"16",rx:"8",fill:"url(#shield_modern_grad)",opacity:"0.15"}),ie.jsx("text",{x:"60",y:"11",fontFamily:"'Inter', sans-serif",fontWeight:"700",fontSize:"9",fill:"#06b6d4",letterSpacing:"2",textAnchor:"middle",style:{textTransform:"uppercase"},children:"Votre Sécurité"}),ie.jsx("circle",{cx:"8",cy:"8",r:"2",fill:"#10b981",children:ie.jsx("animate",{attributeName:"opacity",values:"0.3;1;0.3",dur:"1.5s",repeatCount:"indefinite"})})]})]})]}),_e=({children:e,user:t,onNavigate:s,currentPage:r,onLogout:n,onLoginClick:i,onCheckout:c})=>{const{count:d,toggleCart:u}=xe(),[m,x]=a.useState(!1),h=()=>x(!1),p=e=>{s(e),h()};return ie.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50",children:[ie.jsxs("nav",{className:"sticky top-0 z-50 bg-slate-900 text-white shadow-lg border-b border-slate-800",children:[ie.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:ie.jsxs("div",{className:"flex justify-between h-16 sm:h-20 items-center",children:[ie.jsx("div",{className:"flex items-center cursor-pointer hover:opacity-90 transition py-2 -ml-2",onClick:()=>s("home"),children:ie.jsx(ve,{className:"h-10 sm:h-14 w-auto"})}),ie.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[ie.jsx("button",{onClick:()=>s("home"),className:"text-sm font-medium hover:text-orange-400 transition "+("home"===r?"text-orange-500":"text-slate-300"),children:"Nos Plans d'Action"}),ie.jsx("button",{onClick:()=>s("about"),className:"text-sm font-medium text-slate-300 hover:text-orange-400 transition",children:"L'Expert"}),ie.jsxs("button",{onClick:u,className:"relative p-2 text-slate-300 hover:text-white transition group","aria-label":"Ouvrir le panier",children:[ie.jsx(l,{className:"h-6 w-6"}),d>0&&ie.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full border-2 border-slate-900 animate-bounce-subtle",children:d})]}),t?ie.jsxs("div",{className:"flex items-center space-x-4",children:[ie.jsxs("button",{onClick:()=>s("dashboard"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition "+("dashboard"===r?"bg-orange-600 text-white":"bg-slate-800 text-slate-200 hover:bg-slate-700"),children:[ie.jsx(f,{className:"h-4 w-4 mr-2"}),"Espace Membre"]}),ie.jsx("button",{onClick:n,className:"text-slate-400 hover:text-red-400",title:"Se déconnecter","aria-label":"Se déconnecter",children:ie.jsx(g,{className:"h-5 w-5"})})]}):ie.jsxs("button",{onClick:i,className:"flex items-center text-sm font-medium text-slate-300 hover:text-white transition border border-slate-600 px-4 py-2 rounded-md hover:border-orange-500",children:[ie.jsx(f,{className:"h-4 w-4 mr-2"}),"Connexion Client"]})]}),ie.jsxs("div",{className:"flex md:hidden items-center space-x-2",children:[ie.jsxs("button",{onClick:u,className:"relative p-2 text-slate-300 hover:text-white transition","aria-label":"Ouvrir le panier",children:[ie.jsx(l,{className:"h-6 w-6"}),d>0&&ie.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full border-2 border-slate-900",children:d})]}),ie.jsx("button",{onClick:()=>x(!m),className:"p-2 text-slate-300 hover:text-white transition","aria-label":"Menu",children:m?ie.jsx(o,{className:"h-6 w-6"}):ie.jsx(b,{className:"h-6 w-6"})})]})]})}),m&&ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-40 md:hidden",onClick:h}),ie.jsx("div",{className:"fixed inset-x-0 top-16 sm:top-20 bg-slate-900 border-t border-slate-800 z-50 md:hidden shadow-2xl animate-slideUp",children:ie.jsxs("div",{className:"px-4 py-6 space-y-4 max-h-[calc(100vh-5rem)] overflow-y-auto",children:[ie.jsx("button",{onClick:()=>p("home"),className:"block w-full text-left px-4 py-3 rounded-lg text-base font-medium transition "+("home"===r?"bg-orange-600 text-white":"text-slate-300 hover:bg-slate-800"),children:"Nos Plans d'Action"}),ie.jsx("button",{onClick:()=>p("about"),className:"block w-full text-left px-4 py-3 rounded-lg text-base font-medium text-slate-300 hover:bg-slate-800 transition",children:"L'Expert"}),ie.jsx("div",{className:"border-t border-slate-800 pt-4 mt-4",children:t?ie.jsxs(ie.Fragment,{children:[ie.jsxs("button",{onClick:()=>p("dashboard"),className:"flex items-center w-full px-4 py-3 rounded-lg text-base font-medium transition mb-2 "+("dashboard"===r?"bg-orange-600 text-white":"bg-slate-800 text-slate-200 hover:bg-slate-700"),children:[ie.jsx(f,{className:"h-5 w-5 mr-3"}),"Espace Membre"]}),ie.jsxs("button",{onClick:()=>{n(),h()},className:"flex items-center w-full px-4 py-3 rounded-lg text-base font-medium text-red-400 hover:bg-slate-800 transition",children:[ie.jsx(g,{className:"h-5 w-5 mr-3"}),"Se déconnecter"]})]}):ie.jsxs("button",{onClick:()=>{i(),h()},className:"flex items-center w-full px-4 py-3 rounded-lg text-base font-medium text-slate-300 hover:bg-slate-800 transition border border-slate-700",children:[ie.jsx(f,{className:"h-5 w-5 mr-3"}),"Connexion Client"]})})]})})]})]}),ie.jsx(Ee,{onCheckout:c}),ie.jsx("main",{className:"flex-grow",children:e}),ie.jsxs("footer",{className:"bg-slate-900 text-slate-300 py-12 border-t border-slate-800",children:[ie.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-3 gap-8",children:[ie.jsxs("div",{children:[ie.jsx("div",{className:"flex items-center mb-4 cursor-pointer -ml-2",onClick:()=>s("home"),children:ie.jsx(ve,{className:"h-10 w-auto opacity-90 hover:opacity-100 transition"})}),ie.jsx("p",{className:"text-sm leading-relaxed",children:"La référence pour maîtriser votre sécurité et économiser jusqu'à 400€ en dépannage. Apprenez à ouvrir votre porte vous-même avec nos guides professionnels."})]}),ie.jsxs("div",{children:[ie.jsx("h3",{className:"text-white font-semibold mb-4",children:"Légal"}),ie.jsxs("ul",{className:"space-y-2 text-sm",children:[ie.jsx("li",{children:ie.jsx("button",{onClick:()=>s("cgv"),className:"hover:text-orange-500 transition text-left",children:"CGV & Mentions Légales"})}),ie.jsx("li",{children:ie.jsx("button",{onClick:()=>s("privacy"),className:"hover:text-orange-500 transition text-left",children:"Politique de Confidentialité"})}),ie.jsx("li",{children:ie.jsx("button",{onClick:()=>s("cookies"),className:"hover:text-orange-500 transition text-left",children:"Gestion des Cookies"})})]})]}),ie.jsxs("div",{children:[ie.jsx("h3",{className:"text-white font-semibold mb-4",children:"Paiement Sécurisé"}),ie.jsxs("div",{className:"flex space-x-2",children:[ie.jsx("div",{className:"bg-white px-2 py-1 rounded text-xs font-bold text-slate-900",children:"STRIPE"}),ie.jsx("div",{className:"bg-white px-2 py-1 rounded text-xs font-bold text-slate-900",children:"VISA"}),ie.jsx("div",{className:"bg-white px-2 py-1 rounded text-xs font-bold text-slate-900",children:"MASTERCARD"})]}),ie.jsx("p",{className:"mt-4 text-xs text-slate-400",children:"Transactions chiffrées SSL 256-bit."})]})]}),ie.jsxs("div",{className:"max-w-7xl mx-auto px-4 mt-8 pt-8 border-t border-slate-800 text-center text-xs",children:["© ",(new Date).getFullYear()," SerrureMaster. Tous droits réservés."]})]})]})},je=a.createContext(void 0),Ie=({children:e})=>{const[t,s]=a.useState(null),[r,n]=a.useState(null);a.useEffect(()=>{const e=localStorage.getItem("serrure_master_settings");if(e)try{const t=JSON.parse(e);t.logo&&s(t.logo),t.heroImage&&n(t.heroImage)}catch(t){}},[]);const i=e=>{localStorage.setItem("serrure_master_settings",JSON.stringify(e))};return ie.jsx(je.Provider,{value:{logo:t,heroImage:r,updateLogo:e=>{s(e),i({logo:e,heroImage:r})},updateHeroImage:e=>{n(e),i({logo:t,heroImage:e})},resetSettings:()=>{s(null),n(null),localStorage.removeItem("serrure_master_settings")}},children:e})},ye=i.memo(({onCtaClick:e})=>{const{heroImage:t}=(()=>{const e=a.useContext(je);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e})(),s=a.useMemo(()=>ge[0].image,[]);return ie.jsxs("div",{className:"relative bg-slate-950 overflow-hidden pt-10 pb-20 lg:pt-20 lg:pb-28",children:[ie.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-full z-0 pointer-events-none",children:[ie.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-orange-600/10 rounded-full blur-[120px] mix-blend-screen animate-pulse-slow"}),ie.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-indigo-600/20 rounded-full blur-[120px] mix-blend-screen"}),t&&ie.jsx("img",{src:t,className:"absolute inset-0 w-full h-full object-cover opacity-10 mix-blend-overlay",alt:"Background Texture"})]}),ie.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:ie.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-20 items-center",children:[ie.jsxs("div",{className:"text-left space-y-8 animate-fade-in-up",children:[ie.jsxs("div",{className:"inline-flex items-center space-x-2 bg-slate-900/80 border border-slate-700 rounded-full px-4 py-1.5 backdrop-blur-md",children:[ie.jsx(c,{className:"w-4 h-4 text-orange-500"}),ie.jsx("span",{className:"text-slate-300 text-xs font-bold tracking-wider uppercase",children:"Protocole Certifié • Non Destructif"})]}),ie.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-6xl font-extrabold text-white leading-[1.1] tracking-tight",children:["Porte claquée ? ",ie.jsx("br",{}),"La méthode officielle pour ",ie.jsx("br",{className:"hidden sm:block"}),ie.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-amber-200",children:"agir sans tout casser."})]}),ie.jsxs("p",{className:"text-base sm:text-lg text-slate-400 max-w-xl leading-relaxed",children:["Avant d'appeler un dépanneur, accédez au ",ie.jsx("strong",{children:"plan d'action vidéo"})," utilisé par les professionnels. Une solution légale et guidée pas à pas pour tenter l'ouverture vous-même."]}),ie.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 rounded-xl overflow-hidden grid sm:grid-cols-2 text-sm shadow-xl",children:[ie.jsxs("div",{className:"p-5 border-b sm:border-b-0 sm:border-r border-slate-800 bg-green-900/20",children:[ie.jsxs("p",{className:"text-green-400 font-bold text-xs uppercase mb-3 flex items-center",children:[ie.jsx(N,{className:"w-4 h-4 mr-2"}),"Situation Compatible"]}),ie.jsxs("ul",{className:"space-y-2 text-slate-300",children:[ie.jsxs("li",{className:"flex items-start",children:[ie.jsx("span",{className:"mr-2 text-green-500",children:"•"})," Porte claquée (Clé oubliée à l'intérieur)"]}),ie.jsxs("li",{className:"flex items-start",children:[ie.jsx("span",{className:"mr-2 text-green-500",children:"•"})," Porte blindée claquée (non verrouillée)"]}),ie.jsxs("li",{className:"flex items-start",children:[ie.jsx("span",{className:"mr-2 text-green-500",children:"•"})," Clé cassée (morceau visible)"]})]})]}),ie.jsxs("div",{className:"p-5 bg-red-900/10",children:[ie.jsxs("p",{className:"text-red-400 font-bold text-xs uppercase mb-3 flex items-center",children:[ie.jsx(E,{className:"w-4 h-4 mr-2"}),"Strictement Impossible"]}),ie.jsxs("ul",{className:"space-y-2 text-slate-400",children:[ie.jsxs("li",{className:"flex items-start",children:[ie.jsx("span",{className:"mr-2 text-red-500",children:"•"})," Porte fermée à clé (Verrouillée)"]}),ie.jsxs("li",{className:"flex items-start",children:[ie.jsx("span",{className:"mr-2 text-red-500",children:"•"})," Serrure bloquée / vandalisée"]}),ie.jsxs("li",{className:"flex items-start",children:[ie.jsx("span",{className:"mr-2 text-red-500",children:"•"})," Perte de clé totale (si fermé à clé)"]})]})]})]}),ie.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-2",children:[ie.jsxs("button",{onClick:e,className:"group relative px-8 py-4 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl shadow-lg shadow-orange-900/40 transition-all hover:scale-[1.02] flex items-center justify-center overflow-hidden",children:[ie.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:animate-shimmer"}),ie.jsxs("div",{className:"flex flex-col items-start text-left",children:[ie.jsx("span",{className:"text-sm",children:"Obtenir le Protocole Vidéo"}),ie.jsx("span",{className:"text-[10px] font-normal opacity-90",children:"Accès immédiat sécurisé"})]}),ie.jsx(h,{className:"ml-4 w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),ie.jsxs("div",{className:"flex items-center justify-center gap-3 px-6 py-4 rounded-xl border border-slate-700 bg-slate-800/50 backdrop-blur-sm text-slate-300",children:[ie.jsx(v,{className:"w-5 h-5 text-green-500"}),ie.jsxs("div",{className:"flex flex-col",children:[ie.jsx("span",{className:"text-sm font-bold text-white",children:"Un doute ?"}),ie.jsx("span",{className:"text-[10px] text-slate-300",children:"Diagnostic IA Gratuit"})]})]})]}),ie.jsxs("div",{className:"flex items-start gap-2 opacity-60 max-w-lg",children:[ie.jsx(_,{className:"w-3 h-3 text-slate-400 mt-0.5 flex-shrink-0"}),ie.jsxs("p",{className:"text-[10px] text-slate-400 leading-tight",children:[ie.jsx("strong",{children:"Cadre légal :"})," Service pédagogique avec obligation de moyens. Ne constitue pas une garantie d'ouverture. L'utilisateur certifie être l'occupant légitime du logement."]})]})]}),ie.jsxs("div",{className:"relative hidden lg:block perspective-1000 group",children:[ie.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[350px] h-[650px] bg-gradient-to-tr from-orange-600/30 to-blue-600/30 rounded-full blur-[60px] animate-pulse-slow"}),ie.jsx("div",{className:"relative w-[300px] mx-auto transform rotate-y-12 rotate-z-2 group-hover:rotate-y-0 group-hover:rotate-z-0 transition-all duration-700 ease-out z-10",children:ie.jsxs("div",{className:"relative h-[620px] rounded-[3rem] bg-slate-900 border-[6px] border-slate-800 shadow-2xl overflow-hidden ring-1 ring-white/10",children:[ie.jsxs("div",{className:"absolute inset-0 bg-slate-950 flex flex-col",children:[ie.jsxs("div",{className:"h-14 w-full flex justify-between items-end px-6 pb-2 text-white/80 text-[10px] font-medium z-20",children:[ie.jsx("span",{children:"09:41"}),ie.jsxs("div",{className:"flex gap-1.5",children:[ie.jsx("div",{className:"h-2.5 w-2.5 bg-white/20 rounded-full"}),ie.jsx("div",{className:"h-2.5 w-2.5 bg-white/20 rounded-full"}),ie.jsx("div",{className:"h-2.5 w-4 bg-white/80 rounded-sm"})]})]}),ie.jsxs("div",{className:"px-6 py-4 border-b border-slate-800/50 flex justify-between items-center z-20 bg-slate-950/80 backdrop-blur",children:[ie.jsxs("div",{className:"flex items-center gap-2",children:[ie.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-orange-500 to-pink-600 flex items-center justify-center shadow-lg shadow-orange-500/20",children:ie.jsx(j,{className:"w-4 h-4 text-white"})}),ie.jsx("span",{className:"font-bold text-white text-sm tracking-tight",children:"SerrureMaster"})]}),ie.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-800 border border-slate-700"})]}),ie.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[ie.jsxs("div",{className:"relative h-64 bg-slate-900 m-4 rounded-2xl overflow-hidden border border-slate-800 group-hover:border-orange-500/30 transition-colors",children:[ie.jsx("img",{src:s,className:"absolute inset-0 w-full h-full object-cover opacity-40 mix-blend-overlay",alt:"Secure Content",fetchpriority:"high"}),ie.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/50 to-transparent"}),ie.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center p-4",children:[ie.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-900/80 backdrop-blur border border-orange-500/50 flex items-center justify-center mb-3 shadow-[0_0_15px_rgba(249,115,22,0.3)] animate-pulse",children:ie.jsx(j,{className:"w-5 h-5 text-orange-500"})}),ie.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:"Guide : Porte Claquée"}),ie.jsx("p",{className:"text-orange-400 text-xs font-mono tracking-wider uppercase",children:"Contenu Sécurisé"})]}),ie.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-slate-800",children:ie.jsx("div",{className:"h-full w-1/3 bg-orange-500"})})]}),ie.jsxs("div",{className:"px-4 space-y-3",children:[ie.jsxs("div",{className:"h-16 rounded-xl bg-slate-900 border border-slate-800 flex items-center px-4 gap-3 opacity-60",children:[ie.jsx("div",{className:"w-8 h-8 rounded bg-slate-800 flex items-center justify-center",children:ie.jsx(I,{className:"w-4 h-4 text-slate-500"})}),ie.jsxs("div",{className:"flex-1",children:[ie.jsx("div",{className:"h-2 w-24 bg-slate-700 rounded mb-1.5"}),ie.jsx("div",{className:"h-1.5 w-16 bg-slate-800 rounded"})]}),ie.jsx(j,{className:"w-3 h-3 text-slate-600"})]}),ie.jsxs("div",{className:"h-16 rounded-xl bg-slate-900 border border-slate-800 flex items-center px-4 gap-3 opacity-40",children:[ie.jsx("div",{className:"w-8 h-8 rounded bg-slate-800 flex items-center justify-center",children:ie.jsx(y,{className:"w-4 h-4 text-slate-500"})}),ie.jsxs("div",{className:"flex-1",children:[ie.jsx("div",{className:"h-2 w-20 bg-slate-700 rounded mb-1.5"}),ie.jsx("div",{className:"h-1.5 w-12 bg-slate-800 rounded"})]}),ie.jsx(j,{className:"w-3 h-3 text-slate-600"})]})]}),ie.jsx("div",{className:"absolute bottom-8 left-4 right-4",children:ie.jsx("div",{className:"w-full py-3 bg-gradient-to-r from-orange-600 to-orange-500 rounded-xl text-center text-white text-xs font-bold shadow-lg shadow-orange-900/40 opacity-90",children:"Débloquer le Plan d'Action"})})]})]}),ie.jsx("div",{className:"absolute inset-0 pointer-events-none bg-gradient-to-tr from-transparent via-white/5 to-transparent rounded-[2.5rem] z-30"})]})}),ie.jsx("div",{className:"absolute top-[20%] -right-6 z-40 bg-slate-800/90 backdrop-blur border border-slate-700 p-3 rounded-xl shadow-xl animate-float delay-0",children:ie.jsxs("div",{className:"flex items-center gap-3",children:[ie.jsx("div",{className:"bg-green-500/20 p-2 rounded-full text-green-500 border border-green-500/30",children:ie.jsx(c,{className:"w-5 h-5"})}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-white text-xs font-bold",children:"Légal & Éthique"}),ie.jsx("p",{className:"text-[10px] text-slate-400",children:"Sans effraction"})]})]})}),ie.jsx("div",{className:"absolute bottom-[25%] -left-8 z-40 bg-slate-800/90 backdrop-blur border border-slate-700 p-3 rounded-xl shadow-xl animate-float delay-2000",children:ie.jsxs("div",{className:"flex items-center gap-3",children:[ie.jsx("div",{className:"bg-blue-500/20 p-2 rounded-full text-blue-400 border border-blue-500/30",children:ie.jsx(j,{className:"w-5 h-5"})}),ie.jsxs("div",{children:[ie.jsx("p",{className:"text-white text-xs font-bold",children:"Méthode Pro"}),ie.jsx("p",{className:"text-[10px] text-slate-400",children:"Accès immédiat"})]})]})})]})]})}),ie.jsx("style",{children:"\n        .perspective-1000 { perspective: 1000px; }\n        @keyframes blob {\n          0% { transform: translate(0px, 0px) scale(1); }\n          33% { transform: translate(30px, -50px) scale(1.1); }\n          66% { transform: translate(-20px, 20px) scale(0.9); }\n          100% { transform: translate(0px, 0px) scale(1); }\n        }\n        .animate-blob { animation: blob 7s infinite; }\n        .animate-shimmer { animation: shimmer 2s infinite; }\n        @keyframes shimmer { 100% { transform: translateX(100%); } }\n        @keyframes float { \n          0%, 100% { transform: translateY(0); } \n          50% { transform: translateY(-10px); } \n        }\n        .animate-float { animation: float 5s ease-in-out infinite; }\n        .rotate-y-12 { transform: rotateY(-12deg); }\n        .rotate-z-2 { transform: rotateZ(2deg); }\n      "})]})});ye.displayName="Hero";const we=i.memo(({product:e,isOwned:t})=>{const{addToCart:s,items:r}=xe(),n=a.useMemo(()=>r.some(t=>t.id===e.id),[r,e.id]);if(!e)return null;const i=a.useMemo(()=>e.image||"/images/p1.jpg",[e.image]),l=a.useMemo(()=>e.description||"Description non disponible",[e.description]),o=a.useCallback(()=>{s(e)},[s,e]);return ie.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-2xl p-4 shadow-lg hover:shadow-2xl hover:shadow-orange-500/30 hover:border-orange-500 hover:-translate-y-3 hover:rotate-1 transition-all duration-300 flex flex-col h-full relative overflow-hidden group cursor-pointer",children:[ie.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/0 to-purple-400/0 group-hover:from-orange-400/20 group-hover:to-purple-400/10 transition-all duration-300 pointer-events-none rounded-2xl"}),ie.jsxs("div",{className:"h-32 sm:h-40 -mx-4 -mt-4 mb-4 overflow-hidden relative bg-gradient-to-br from-orange-50 to-purple-50 rounded-t-2xl group-hover:shadow-lg transition-all duration-300",children:[ie.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white/80 via-transparent to-transparent z-10"}),ie.jsx("img",{src:i,alt:e.title||"Produit",decoding:"async",onError:e=>{e.target.src="/images/p1.jpg"},className:"w-full h-full object-cover grayscale-0 group-hover:grayscale-0 brightness-100 group-hover:brightness-110 saturate-100 group-hover:saturate-125 group-hover:scale-110 group-hover:rotate-2 transition-all duration-500 ease-out"})]}),ie.jsxs("div",{className:"flex-1 flex flex-col z-10",children:[ie.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-900 mb-2 group-hover:text-orange-600 group-hover:translate-x-1 transition-all duration-200 line-clamp-2 min-h-[3rem] flex items-center leading-tight",children:e.title}),ie.jsx("p",{className:"text-slate-600 mb-3 text-xs sm:text-sm leading-relaxed line-clamp-3 min-h-[3.5rem]",children:l}),e.compatibility?ie.jsx("div",{className:"mb-3 bg-gradient-to-br from-slate-50 to-slate-100/50 p-3 rounded-xl border border-slate-200 flex-1 shadow-sm group-hover:border-orange-200 transition-colors duration-300",children:ie.jsxs("ul",{className:"text-xs sm:text-sm text-slate-700 space-y-1.5",children:[e.compatibility.valid.slice(0,2).map((e,t)=>ie.jsxs("li",{className:"flex gap-2 items-start",children:[ie.jsx(N,{className:"text-green-500 w-4 h-4 mt-0.5 flex-shrink-0"}),ie.jsx("span",{className:"text-slate-800 line-clamp-1",children:e})]},`v-${t}`)),e.compatibility.invalid.slice(0,1).map((e,t)=>ie.jsxs("li",{className:"flex gap-2 items-start opacity-60",children:[ie.jsx(E,{className:"text-red-400 w-4 h-4 mt-0.5 flex-shrink-0"}),ie.jsx("span",{className:"text-slate-400 line-clamp-1",children:e})]},`i-${t}`))]})}):ie.jsx("div",{className:"mb-3 flex-1 bg-slate-50 rounded-xl border border-slate-200 opacity-0"}),ie.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-2.5 text-[11px] font-semibold text-slate-700 mb-3 border border-green-200 flex items-center justify-between shadow-sm group-hover:scale-105 group-hover:shadow-md transition-all duration-200",children:ie.jsxs("span",{className:"flex items-center gap-2",children:[ie.jsx(v,{className:"text-green-600 w-4 h-4 group-hover:animate-pulse"}),"Assistance Pro incluse"]})}),ie.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t-2 border-slate-100 group-hover:border-orange-200 transition-colors duration-300",children:[ie.jsxs("div",{className:"flex flex-col group-hover:scale-105 transition-transform duration-200",children:[ie.jsxs("span",{className:"text-slate-900 text-2xl sm:text-3xl font-black tracking-tight",children:[e.price," €"]}),e.originalPrice&&ie.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[ie.jsxs("span",{className:"text-slate-400 line-through text-xs font-medium",children:[e.originalPrice," €"]}),ie.jsxs("span",{className:"bg-green-100 text-green-700 text-[10px] font-bold px-1.5 py-0.5 rounded-full animate-pulse",children:["-",Math.round((e.originalPrice-e.price)/e.originalPrice*100),"%"]})]})]}),ie.jsx("button",{onClick:o,disabled:t||n,className:"px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg font-bold text-xs sm:text-sm transition-all shadow-lg transform active:scale-90 flex items-center group-hover:scale-110 "+(t?"bg-gradient-to-r from-green-50 to-emerald-50 text-green-700 border-2 border-green-300 cursor-default shadow-green-200":n?"bg-gradient-to-r from-slate-100 to-slate-200 text-slate-700 border-2 border-slate-300 cursor-default shadow-slate-300":"bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-orange-500/50 hover:shadow-orange-500/80 border-2 border-orange-400 hover:rotate-3"),children:t?ie.jsxs(ie.Fragment,{children:[ie.jsx(w,{className:"w-4 h-4 mr-2"})," Acquis"]}):n?ie.jsxs(ie.Fragment,{children:[ie.jsx(N,{className:"w-4 h-4 mr-2"})," Au panier"]}):"Ajouter au panier"})]})]})]})});we.displayName="ProductCard";var Te,Ae,Se,Oe,Re,Ce,De,Le,Pe,Ue,Me,ke,Fe,Ge,Be,He,Ve,qe,Ye,Ke,ze,$e,Je,We,Xe,Ze,Qe,et,tt,st,rt,at,nt,it,lt,ot,ct,dt,ut,mt,xt,ht,pt,ft,gt,bt,Nt,Et,vt,_t,jt,It,yt,wt,Tt,At,St,Ot,Rt,Ct,Dt,Lt,Pt,Ut,Mt,kt,Ft,Gt,Bt,Ht,Vt,qt,Yt,Kt,zt,$t,Jt,Wt,Xt,Zt,Qt,es,ts,ss,rs,as,ns,is,ls,os,cs,ds,us,ms,xs,hs,ps,fs,gs,bs,Ns,Es,vs,_s,js,Is,ys,ws,Ts,As,Ss,Os,Rs={};function Cs(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}function Ds(e){return this instanceof Ds?(this.v=e,this):new Ds(e)}function Ls(e,t,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=s.apply(e,t||[]),n=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){a[e]&&(r[e]=function(t){return new Promise(function(s,r){n.push([e,t,s,r])>1||l(e,t)})},t&&(r[e]=t(r[e])))}function l(e,t){try{(s=a[e](t)).value instanceof Ds?Promise.resolve(s.value.v).then(o,c):d(n[0][2],s)}catch(r){d(n[0][3],r)}var s}function o(e){l("next",e)}function c(e){l("throw",e)}function d(e,t){e(t),n.shift(),n.length&&l(n[0][0],n[0][1])}}function Ps(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,s=e[Symbol.asyncIterator];return s?s.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&e[t],r=0;if(s)return s.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=e[s]&&function(t){return new Promise(function(r,a){!function(e,t,s,r){Promise.resolve(r).then(function(t){e({value:t,done:s})},t)}(r,a,(t=e[s](t)).done,t.value)})}}}(Ae=Te||(Te={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",Ae.OUTCOME_OK="OUTCOME_OK",Ae.OUTCOME_FAILED="OUTCOME_FAILED",Ae.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(Oe=Se||(Se={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",Oe.PYTHON="PYTHON",(Ce=Re||(Re={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",Ce.SILENT="SILENT",Ce.WHEN_IDLE="WHEN_IDLE",Ce.INTERRUPT="INTERRUPT",(Le=De||(De={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",Le.STRING="STRING",Le.NUMBER="NUMBER",Le.INTEGER="INTEGER",Le.BOOLEAN="BOOLEAN",Le.ARRAY="ARRAY",Le.OBJECT="OBJECT",Le.NULL="NULL",(Ue=Pe||(Pe={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",Ue.SIMPLE_SEARCH="SIMPLE_SEARCH",Ue.ELASTIC_SEARCH="ELASTIC_SEARCH",(ke=Me||(Me={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",ke.NO_AUTH="NO_AUTH",ke.API_KEY_AUTH="API_KEY_AUTH",ke.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",ke.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",ke.OAUTH="OAUTH",ke.OIDC_AUTH="OIDC_AUTH",(Ge=Fe||(Fe={})).HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",Ge.HTTP_IN_QUERY="HTTP_IN_QUERY",Ge.HTTP_IN_HEADER="HTTP_IN_HEADER",Ge.HTTP_IN_PATH="HTTP_IN_PATH",Ge.HTTP_IN_BODY="HTTP_IN_BODY",Ge.HTTP_IN_COOKIE="HTTP_IN_COOKIE",(He=Be||(Be={})).PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",He.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",He.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",He.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",He.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",He.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",He.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH",(qe=Ve||(Ve={})).UNSPECIFIED="UNSPECIFIED",qe.BLOCKING="BLOCKING",qe.NON_BLOCKING="NON_BLOCKING",(Ke=Ye||(Ye={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Ke.MODE_DYNAMIC="MODE_DYNAMIC",($e=ze||(ze={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",$e.AUTO="AUTO",$e.ANY="ANY",$e.NONE="NONE",$e.VALIDATED="VALIDATED",(We=Je||(Je={})).THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",We.LOW="LOW",We.MEDIUM="MEDIUM",We.HIGH="HIGH",We.MINIMAL="MINIMAL",(Ze=Xe||(Xe={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",Ze.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",Ze.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",Ze.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",Ze.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",Ze.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",Ze.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",Ze.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",Ze.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",Ze.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",Ze.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK",(et=Qe||(Qe={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",et.SEVERITY="SEVERITY",et.PROBABILITY="PROBABILITY",(st=tt||(tt={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",st.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",st.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",st.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",st.BLOCK_NONE="BLOCK_NONE",st.OFF="OFF",(at=rt||(rt={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",at.STOP="STOP",at.MAX_TOKENS="MAX_TOKENS",at.SAFETY="SAFETY",at.RECITATION="RECITATION",at.LANGUAGE="LANGUAGE",at.OTHER="OTHER",at.BLOCKLIST="BLOCKLIST",at.PROHIBITED_CONTENT="PROHIBITED_CONTENT",at.SPII="SPII",at.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",at.IMAGE_SAFETY="IMAGE_SAFETY",at.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",at.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",at.NO_IMAGE="NO_IMAGE",at.IMAGE_RECITATION="IMAGE_RECITATION",at.IMAGE_OTHER="IMAGE_OTHER",(it=nt||(nt={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",it.NEGLIGIBLE="NEGLIGIBLE",it.LOW="LOW",it.MEDIUM="MEDIUM",it.HIGH="HIGH",(ot=lt||(lt={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",ot.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",ot.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",ot.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",ot.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(dt=ct||(ct={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",dt.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",dt.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",dt.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",dt.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE",(mt=ut||(ut={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",mt.SAFETY="SAFETY",mt.OTHER="OTHER",mt.BLOCKLIST="BLOCKLIST",mt.PROHIBITED_CONTENT="PROHIBITED_CONTENT",mt.IMAGE_SAFETY="IMAGE_SAFETY",mt.MODEL_ARMOR="MODEL_ARMOR",mt.JAILBREAK="JAILBREAK",(ht=xt||(xt={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",ht.ON_DEMAND="ON_DEMAND",ht.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(ft=pt||(pt={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",ft.TEXT="TEXT",ft.IMAGE="IMAGE",ft.AUDIO="AUDIO",(bt=gt||(gt={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",bt.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",bt.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",bt.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(Et=Nt||(Nt={})).TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",Et.TUNING_MODE_FULL="TUNING_MODE_FULL",Et.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER",(_t=vt||(vt={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",_t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",_t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",_t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",_t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",_t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",_t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(It=jt||(jt={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",It.JOB_STATE_QUEUED="JOB_STATE_QUEUED",It.JOB_STATE_PENDING="JOB_STATE_PENDING",It.JOB_STATE_RUNNING="JOB_STATE_RUNNING",It.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",It.JOB_STATE_FAILED="JOB_STATE_FAILED",It.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",It.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",It.JOB_STATE_PAUSED="JOB_STATE_PAUSED",It.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",It.JOB_STATE_UPDATING="JOB_STATE_UPDATING",It.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(wt=yt||(yt={})).TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",wt.TUNING_TASK_I2V="TUNING_TASK_I2V",wt.TUNING_TASK_T2V="TUNING_TASK_T2V",wt.TUNING_TASK_R2V="TUNING_TASK_R2V",(At=Tt||(Tt={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",At.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",At.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",At.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",At.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH",(Ot=St||(St={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",Ot.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",Ot.BALANCED="BALANCED",Ot.PRIORITIZE_COST="PRIORITIZE_COST",(Ct=Rt||(Rt={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",Ct.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(Lt=Dt||(Dt={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Lt.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Lt.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Lt.BLOCK_NONE="BLOCK_NONE",(Ut=Pt||(Pt={})).DONT_ALLOW="DONT_ALLOW",Ut.ALLOW_ADULT="ALLOW_ADULT",Ut.ALLOW_ALL="ALLOW_ALL",(kt=Mt||(Mt={})).auto="auto",kt.en="en",kt.ja="ja",kt.ko="ko",kt.hi="hi",kt.zh="zh",kt.pt="pt",kt.es="es",(Gt=Ft||(Ft={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",Gt.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",Gt.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",Gt.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",Gt.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(Ht=Bt||(Bt={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",Ht.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",Ht.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",Ht.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(qt=Vt||(Vt={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",qt.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",qt.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",qt.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(Kt=Yt||(Yt={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",Kt.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",Kt.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",Kt.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",Kt.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",Kt.EDIT_MODE_STYLE="EDIT_MODE_STYLE",Kt.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",Kt.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",($t=zt||(zt={})).FOREGROUND="FOREGROUND",$t.BACKGROUND="BACKGROUND",$t.PROMPT="PROMPT",$t.SEMANTIC="SEMANTIC",$t.INTERACTIVE="INTERACTIVE",(Wt=Jt||(Jt={})).ASSET="ASSET",Wt.STYLE="STYLE",(Zt=Xt||(Xt={})).INSERT="INSERT",Zt.REMOVE="REMOVE",Zt.REMOVE_STATIC="REMOVE_STATIC",Zt.OUTPAINT="OUTPAINT",(es=Qt||(Qt={})).OPTIMIZED="OPTIMIZED",es.LOSSLESS="LOSSLESS",(ss=ts||(ts={})).SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",ss.PREFERENCE_TUNING="PREFERENCE_TUNING",(as=rs||(rs={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",as.STATE_PENDING="STATE_PENDING",as.STATE_ACTIVE="STATE_ACTIVE",as.STATE_FAILED="STATE_FAILED",(is=ns||(ns={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",is.PROCESSING="PROCESSING",is.ACTIVE="ACTIVE",is.FAILED="FAILED",(os=ls||(ls={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",os.UPLOADED="UPLOADED",os.GENERATED="GENERATED",os.REGISTERED="REGISTERED",(ds=cs||(cs={})).TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",ds.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",ds.RESPONSE_REJECTED="RESPONSE_REJECTED",ds.NEED_MORE_INPUT="NEED_MORE_INPUT",(ms=us||(us={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",ms.TEXT="TEXT",ms.IMAGE="IMAGE",ms.VIDEO="VIDEO",ms.AUDIO="AUDIO",ms.DOCUMENT="DOCUMENT",(hs=xs||(xs={})).VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",hs.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",hs.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS",(fs=ps||(ps={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",fs.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",fs.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(bs=gs||(gs={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",bs.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",bs.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(Es=Ns||(Ns={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",Es.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",Es.NO_INTERRUPTION="NO_INTERRUPTION",(_s=vs||(vs={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",_s.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",_s.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(Is=js||(js={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",Is.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",Is.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",Is.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",Is.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",Is.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",Is.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",Is.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",Is.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",Is.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",Is.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",Is.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",Is.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",(ws=ys||(ys={})).MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",ws.QUALITY="QUALITY",ws.DIVERSITY="DIVERSITY",ws.VOCALIZATION="VOCALIZATION",(As=Ts||(Ts={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",As.PLAY="PLAY",As.PAUSE="PAUSE",As.STOP="STOP",As.RESET_CONTEXT="RESET_CONTEXT",(Os=Ss||(Ss={})).PAGED_ITEM_BATCH_JOBS="batchJobs",Os.PAGED_ITEM_MODELS="models",Os.PAGED_ITEM_TUNING_JOBS="tuningJobs",Os.PAGED_ITEM_FILES="files",Os.PAGED_ITEM_CACHED_CONTENTS="cachedContents",Os.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",Os.PAGED_ITEM_DOCUMENTS="documents","function"==typeof SuppressedError&&SuppressedError;let Us=function(){const{crypto:e}=globalThis;if(null==e?void 0:e.randomUUID)return Us=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),s=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^s()&15>>+e/4).toString(16))};function Ms(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const ks=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch(t){}try{return new Error(JSON.stringify(e))}catch(s){}}return new Error(e)};class Fs extends Error{}class Gs extends Fs{constructor(e,t,s,r){super(`${Gs.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,s){const r=(null==t?void 0:t.message)?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new Hs({message:s,cause:ks(t)});const a=t;return 400===e?new qs(e,a,s,r):401===e?new Ys(e,a,s,r):403===e?new Ks(e,a,s,r):404===e?new zs(e,a,s,r):409===e?new $s(e,a,s,r):422===e?new Js(e,a,s,r):429===e?new Ws(e,a,s,r):e>=500?new Xs(e,a,s,r):new Gs(e,a,s,r)}}class Bs extends Gs{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Hs extends Gs{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Vs extends Hs{constructor({message:e}={}){super({message:null!=e?e:"Request timed out."})}}class qs extends Gs{}class Ys extends Gs{}class Ks extends Gs{}class zs extends Gs{}class $s extends Gs{}class Js extends Gs{}class Ws extends Gs{}class Xs extends Gs{}const Zs=/^[a-z][a-z0-9+.-]*:/i;let Qs=e=>(Qs=Array.isArray,Qs(e));const er=Qs,tr="0.0.1",sr=()=>{var e,t,s,r,a;const n="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===n)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tr,"X-Stainless-OS":ar(Deno.build.os),"X-Stainless-Arch":rr(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!==(t=null===(e=Deno.version)||void 0===e?void 0:e.deno)&&void 0!==t?t:"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===n)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tr,"X-Stainless-OS":ar(null!==(s=globalThis.process.platform)&&void 0!==s?s:"unknown"),"X-Stainless-Arch":rr(null!==(r=globalThis.process.arch)&&void 0!==r?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!==(a=globalThis.process.version)&&void 0!==a?a:"unknown"};const i=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:s}of e){const e=s.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return i?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${i.browser}`,"X-Stainless-Runtime-Version":i.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},rr=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",ar=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let nr;function ir(...e){const t=globalThis.ReadableStream;if(void 0===t)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function lr(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return ir({start(){},async pull(e){const{done:s,value:r}=await t.next();s?e.close():e.enqueue(r)},async cancel(){var e;await(null===(e=t.return)||void 0===e?void 0:e.call(t))}})}function or(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return(null==e?void 0:e.done)&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const cr=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),dr=()=>{var e;if("undefined"==typeof File){const{process:t}=globalThis,s="string"==typeof(null===(e=null==t?void 0:t.versions)||void 0===e?void 0:e.node)&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ur(e,t,s){return dr(),new File(e,null!=t?t:"unknown_file",s)}const mr=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function xr(e){var t,s,r,a,n;let i=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)i.push(e);else if(mr(e))i.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!(e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator])(e)){const t=null===(n=null==e?void 0:e.constructor)||void 0===n?void 0:n.name;throw new Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";return`; props: [${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}(e)}`)}try{for(var l,o=!0,c=Ps(e);!(t=(l=await c.next()).done);o=!0){a=l.value,o=!1;const e=a;i.push(...await xr(e))}}catch(d){s={error:d}}finally{try{o||t||!(r=c.return)||await r.call(c)}finally{if(s)throw s.error}}}return i}class hr{constructor(e){this._client=e}}function pr(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}hr._key=[];const fr=Object.freeze(Object.create(null)),gr=((e=pr)=>function(t,...s){if(1===t.length)return t[0];let r=!1;const a=[],n=t.reduce((t,n,i)=>{var l,o,c;/[?#]/.test(n)&&(r=!0);const d=s[i];let u=(r?encodeURIComponent:e)(""+d);return i!==s.length&&(null==d||"object"==typeof d&&d.toString===(null===(c=Object.getPrototypeOf(null!==(o=Object.getPrototypeOf(null!==(l=d.hasOwnProperty)&&void 0!==l?l:fr))&&void 0!==o?o:fr))||void 0===c?void 0:c.toString))&&(u=d+"",a.push({start:t.length+n.length,length:u.length,error:`Value of type ${Object.prototype.toString.call(d).slice(8,-1)} is not a valid path parameter`})),t+n+(i===s.length?"":u)},""),i=n.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let o;for(;null!==(o=l.exec(i));)a.push({start:o.index,length:o[0].length,error:`Value "${o[0]}" can't be safely passed as a path parameter`});if(a.sort((e,t)=>e.start-t.start),a.length>0){let e=0;const t=a.reduce((t,s)=>{const r=" ".repeat(s.start-e),a="^".repeat(s.length);return e=s.start+s.length,t+r+a},"");throw new Fs(`Path parameters result in path with invalid segments:\n${a.map(e=>e.error).join("\n")}\n${n}\n${t}`)}return n})(pr);class br extends hr{create(e,t){var s;const{api_version:r=this._client.apiVersion}=e,a=Cs(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Fs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Fs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(gr`/${r}/interactions`,Object.assign(Object.assign({body:a},t),{stream:null!==(s=e.stream)&&void 0!==s&&s}))}delete(e,t={},s){const{api_version:r=this._client.apiVersion}=null!=t?t:{};return this._client.delete(gr`/${r}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:r=this._client.apiVersion}=null!=t?t:{};return this._client.post(gr`/${r}/interactions/${e}/cancel`,s)}get(e,t={},s){var r;const a=null!=t?t:{},{api_version:n=this._client.apiVersion}=a,i=Cs(a,["api_version"]);return this._client.get(gr`/${n}/interactions/${e}`,Object.assign(Object.assign({query:i},s),{stream:null!==(r=null==t?void 0:t.stream)&&void 0!==r&&r}))}}br._key=Object.freeze(["interactions"]);class Nr extends br{}let Er,vr;function _r(e){let t;return(null!=Er?Er:(t=new globalThis.TextEncoder,Er=t.encode.bind(t)))(e)}function jr(e){let t;return(null!=vr?vr:(t=new globalThis.TextDecoder,vr=t.decode.bind(t)))(e)}class Ir{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?_r(e):e;this.buffer=function(e){let t=0;for(const a of e)t+=a.length;const s=new Uint8Array(t);let r=0;for(const a of e)s.set(a,r),r+=a.length;return s}([this.buffer,t]);const s=[];let r;for(;null!=(r=yr(this.buffer,this.carriageReturnIndex));){if(r.carriage&&null==this.carriageReturnIndex){this.carriageReturnIndex=r.index;continue}if(null!=this.carriageReturnIndex&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(jr(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const e=null!==this.carriageReturnIndex?r.preceding-1:r.preceding,t=jr(this.buffer.subarray(0,e));s.push(t),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode("\n"):[]}}function yr(e,t){for(let s=null!=t?t:0;s<e.length;s++){if(10===e[s])return{preceding:s,index:s+1,carriage:!1};if(13===e[s])return{preceding:s,index:s+1,carriage:!0}}return null}function wr(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}Ir.NEWLINE_CHARS=new Set(["\n","\r"]),Ir.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const Tr={off:0,error:200,warn:300,info:400,debug:500},Ar=(e,t,s)=>{var r,a;if(e)return r=Tr,a=e,Object.prototype.hasOwnProperty.call(r,a)?e:void Dr(s).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Tr))}`)};function Sr(){}function Or(e,t,s){return!t||Tr[e]>Tr[s]?Sr:t[e].bind(t)}const Rr={error:Sr,warn:Sr,info:Sr,debug:Sr};let Cr=new WeakMap;function Dr(e){var t;const s=e.logger,r=null!==(t=e.logLevel)&&void 0!==t?t:"off";if(!s)return Rr;const a=Cr.get(s);if(a&&a[0]===r)return a[1];const n={error:Or("error",s,r),warn:Or("warn",s,r),info:Or("info",s,r),debug:Or("debug",s,r)};return Cr.set(s,[r,n]),n}const Lr=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-goog-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class Pr{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let r=!1;const a=s?Dr(s):console;return new Pr(function(){return Ls(this,arguments,function*(){var s,n,i,l;if(r)throw new Fs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{try{for(var c,d=!0,u=Ps(function(e,t){return Ls(this,arguments,function*(){var s,r,a,n;if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new Fs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new Fs("Attempted to iterate over a response with no body")}const i=new Ur,l=new Ir,o=or(e.body);try{for(var c,d=!0,u=Ps(function(e){return Ls(this,arguments,function*(){var t,s,r,a;let n=new Uint8Array;try{for(var i,l=!0,o=Ps(e);!(t=(i=yield Ds(o.next())).done);l=!0){a=i.value,l=!1;const e=a;if(null==e)continue;const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?_r(e):e;let s,r=new Uint8Array(n.length+t.length);for(r.set(n),r.set(t,n.length),n=r;-1!==(s=wr(n));)yield yield Ds(n.slice(0,s)),n=n.slice(s)}}catch(c){s={error:c}}finally{try{l||t||!(r=o.return)||(yield Ds(r.call(o)))}finally{if(s)throw s.error}}n.length>0&&(yield yield Ds(n))})}(o));!(s=(c=yield Ds(u.next())).done);d=!0){n=c.value,d=!1;const e=n;for(const t of l.decode(e)){const e=i.decode(t);e&&(yield yield Ds(e))}}}catch(m){r={error:m}}finally{try{d||s||!(a=u.return)||(yield Ds(a.call(u)))}finally{if(r)throw r.error}}for(const e of l.flush()){const t=i.decode(e);t&&(yield yield Ds(t))}})}(e,t));!(s=(c=yield Ds(u.next())).done);d=!0){l=c.value,d=!1;const e=l;if(!o)if(e.data.startsWith("[DONE]"))o=!0;else try{yield yield Ds(JSON.parse(e.data))}catch(m){throw a.error("Could not parse message into JSON:",e.data),a.error("From chunk:",e.raw),m}}}catch(x){n={error:x}}finally{try{d||s||!(i=u.return)||(yield Ds(i.call(u)))}finally{if(n)throw n.error}}o=!0}catch(m){if(Ms(m))return yield Ds(void 0);throw m}finally{o||t.abort()}})},t,s)}static fromReadableStream(e,t,s){let r=!1;return new Pr(function(){return Ls(this,arguments,function*(){var s,a,n,i;if(r)throw new Fs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{try{for(var o,c=!0,d=Ps(function(){return Ls(this,arguments,function*(){var t,s,r,a;const n=new Ir,i=or(e);try{for(var l,o=!0,c=Ps(i);!(t=(l=yield Ds(c.next())).done);o=!0){a=l.value,o=!1;const e=a;for(const t of n.decode(e))yield yield Ds(t)}}catch(d){s={error:d}}finally{try{o||t||!(r=c.return)||(yield Ds(r.call(c)))}finally{if(s)throw s.error}}for(const e of n.flush())yield yield Ds(e)})}());!(s=(o=yield Ds(d.next())).done);c=!0){i=o.value,c=!1;const e=i;l||e&&(yield yield Ds(JSON.parse(e)))}}catch(u){a={error:u}}finally{try{c||s||!(n=d.return)||(yield Ds(n.call(d)))}finally{if(a)throw a.error}}l=!0}catch(m){if(Ms(m))return yield Ds(void 0);throw m}finally{l||t.abort()}})},t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=s.next();e.push(r),t.push(r)}return r.shift()}});return[new Pr(()=>r(e),this.controller,this.client),new Pr(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return ir({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:s,done:r}=await t.next();if(r)return e.close();const a=_r(JSON.stringify(s)+"\n");e.enqueue(a)}catch(s){e.error(s)}},async cancel(){var e;await(null===(e=t.return)||void 0===e?void 0:e.call(t))}})}}class Ur{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}async function Mr(e,t){const{response:s,requestLogID:r,retryOfRequestLogID:a,startTime:n}=t,i=await(async()=>{var r;if(t.options.stream)return Dr(e).debug("response",s.status,s.url,s.headers,s.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(s,t.controller,e):Pr.fromSSEResponse(s,t.controller,e);if(204===s.status)return null;if(t.options.__binaryResponse)return s;const a=s.headers.get("content-type"),n=null===(r=null==a?void 0:a.split(";")[0])||void 0===r?void 0:r.trim();return(null==n?void 0:n.includes("application/json"))||(null==n?void 0:n.endsWith("+json"))?await s.json():await s.text()})();return Dr(e).debug(`[${r}] response parsed`,Lr({retryOfRequestLogID:a,url:s.url,status:s.status,body:i,durationMs:Date.now()-n})),i}class kr extends Promise{constructor(e,t,s=Mr){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new kr(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const Fr=Symbol("brand.privateNullableHeaders");function*Gr(e){if(!e)return;if(Fr in e){const{values:t,nulls:s}=e;yield*t.entries();for(const e of s)yield[e,null];return}let t,s=!1;e instanceof Headers?t=e.entries():er(e)?t=e:(s=!0,t=Object.entries(null!=e?e:{}));for(let r of t){const e=r[0];if("string"!=typeof e)throw new TypeError("expected header name to be a string");const t=er(r[1])?r[1]:[r[1]];let a=!1;for(const r of t)void 0!==r&&(s&&!a&&(a=!0,yield[e,null]),yield[e,r])}}const Br=e=>{const t=new Headers,s=new Set;for(const r of e){const e=new Set;for(const[a,n]of Gr(r)){const r=a.toLowerCase();e.has(r)||(t.delete(a),e.add(r)),null===n?(t.delete(a),s.add(r)):(t.append(a,n),s.delete(r))}}return{[Fr]:!0,values:t,nulls:s}},Hr=e=>{var t,s,r,a,n,i;return void 0!==globalThis.process?null!==(r=null===(s=null===(t=Rs)||void 0===t?void 0:t[e])||void 0===s?void 0:s.trim())&&void 0!==r?r:void 0:void 0!==globalThis.Deno?null===(i=null===(n=null===(a=globalThis.Deno.env)||void 0===a?void 0:a.get)||void 0===n?void 0:n.call(a,e))||void 0===i?void 0:i.trim():void 0};var Vr;class qr{constructor(e){var t,s,r,a,n,i,l,{baseURL:o=Hr("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(null!==(t=Hr("GEMINI_API_KEY"))&&void 0!==t?t:null),apiVersion:d="v1beta"}=e,u=Cs(e,["baseURL","apiKey","apiVersion"]);const m=Object.assign(Object.assign({apiKey:c,apiVersion:d},u),{baseURL:o||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=null!==(s=m.timeout)&&void 0!==s?s:qr.DEFAULT_TIMEOUT,this.logger=null!==(r=m.logger)&&void 0!==r?r:console;const x="warn";this.logLevel=x,this.logLevel=null!==(n=null!==(a=Ar(m.logLevel,"ClientOptions.logLevel",this))&&void 0!==a?a:Ar(Hr("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))&&void 0!==n?n:x,this.fetchOptions=m.fetchOptions,this.maxRetries=null!==(i=m.maxRetries)&&void 0!==i?i:2,this.fetch=null!==(l=m.fetch)&&void 0!==l?l:function(){if("undefined"!=typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),this.encoder=cr,this._options=m,this.apiKey=c,this.apiVersion=d,this.clientAdapter=m.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return"https://generativelanguage.googleapis.com"!==this.baseURL}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!e.has("authorization")&&!e.has("x-goog-api-key")&&!(this.apiKey&&e.get("x-goog-api-key")||t.has("x-goog-api-key")))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Br([e.headers]);if(!t.values.has("authorization")&&!t.values.has("x-goog-api-key"))return this.apiKey?Br([{"x-goog-api-key":this.apiKey}]):this.clientAdapter.isVertexAI()?Br([await this.clientAdapter.getAuthHeaders()]):void 0}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new Fs(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${tr}`}defaultIdempotencyKey(){return`stainless-node-retry-${Us()}`}makeStatusError(e,t,s,r){return Gs.generate(e,t,s,r)}buildURL(e,t,s){const r=!this.baseURLOverridden()&&s||this.baseURL,a=(e=>Zs.test(e))(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return function(e){if(!e)return!0;for(const t in e)return!1;return!0}(n)||(t=Object.assign(Object.assign({},n),t)),"object"==typeof t&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(s=>Object.assign({method:e,path:t},s)))}request(e,t=null){return new kr(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var r,a,n;const i=await e,l=null!==(r=i.maxRetries)&&void 0!==r?r:this.maxRetries;null==t&&(t=l),await this.prepareOptions(i);const{req:o,url:c,timeout:d}=await this.buildRequest(i,{retryCount:l-t});await this.prepareRequest(o,{url:c,options:i});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=void 0===s?"":`, retryOf: ${s}`,x=Date.now();if(Dr(this).debug(`[${u}] sending request`,Lr({retryOfRequestLogID:s,method:i.method,url:c,options:i,headers:o.headers})),null===(a=i.signal)||void 0===a?void 0:a.aborted)throw new Bs;const h=new AbortController,p=await this.fetchWithTimeout(c,o,d,h).catch(ks),f=Date.now();if(p instanceof globalThis.Error){const e=`retrying, ${t} attempts remaining`;if(null===(n=i.signal)||void 0===n?void 0:n.aborted)throw new Bs;const r=Ms(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(t)return Dr(this).info(`[${u}] connection ${r?"timed out":"failed"} - ${e}`),Dr(this).debug(`[${u}] connection ${r?"timed out":"failed"} (${e})`,Lr({retryOfRequestLogID:s,url:c,durationMs:f-x,message:p.message})),this.retryRequest(i,t,null!=s?s:u);if(Dr(this).info(`[${u}] connection ${r?"timed out":"failed"} - error; no more retries left`),Dr(this).debug(`[${u}] connection ${r?"timed out":"failed"} (error; no more retries left)`,Lr({retryOfRequestLogID:s,url:c,durationMs:f-x,message:p.message})),r)throw new Vs;throw new Hs({cause:p})}const g=`[${u}${m}] ${o.method} ${c} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${f-x}ms`;if(!p.ok){const e=await this.shouldRetry(p);if(t&&e){const e=`retrying, ${t} attempts remaining`;return await async function(e){var t,s;if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void(await(null===(s=(t=e[Symbol.asyncIterator]()).return)||void 0===s?void 0:s.call(t)));const r=e.getReader(),a=r.cancel();r.releaseLock(),await a}(p.body),Dr(this).info(`${g} - ${e}`),Dr(this).debug(`[${u}] response error (${e})`,Lr({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,durationMs:f-x})),this.retryRequest(i,t,null!=s?s:u,p.headers)}const r=e?"error; no more retries left":"error; not retryable";Dr(this).info(`${g} - ${r}`);const a=await p.text().catch(e=>ks(e).message),n=(e=>{try{return JSON.parse(e)}catch(t){return}})(a),l=n?void 0:a;throw Dr(this).debug(`[${u}] response error (${r})`,Lr({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,message:l,durationMs:Date.now()-x})),this.makeStatusError(p.status,n,l,p.headers)}return Dr(this).info(g),Dr(this).debug(`[${u}] response start`,Lr({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,durationMs:f-x})),{response:p,options:i,controller:h,requestLogID:u,retryOfRequestLogID:s,startTime:x}}async fetchWithTimeout(e,t,s,r){const a=t||{},{signal:n,method:i}=a,l=Cs(a,["signal","method"]);n&&n.addEventListener("abort",()=>r.abort());const o=setTimeout(()=>r.abort(),s),c=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||"object"==typeof l.body&&null!==l.body&&Symbol.asyncIterator in l.body,d=Object.assign(Object.assign(Object.assign({signal:r.signal},c?{duplex:"half"}:{}),{method:"GET"}),l);i&&(d.method=i.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(o)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,s,r){var a;let n;const i=null==r?void 0:r.get("retry-after-ms");if(i){const e=parseFloat(i);Number.isNaN(e)||(n=e)}const l=null==r?void 0:r.get("retry-after");if(l&&!n){const e=parseFloat(l);n=Number.isNaN(e)?Date.parse(l)-Date.now():1e3*e}if(!(n&&0<=n&&n<6e4)){const s=null!==(a=e.maxRetries)&&void 0!==a?a:this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,s)}var o;return await(o=n,new Promise(e=>setTimeout(e,o))),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const s=t-e;return Math.min(.5*Math.pow(2,s),8)*(1-.25*Math.random())*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,r,a;const n=Object.assign({},e),{method:i,path:l,query:o,defaultBaseURL:c}=n,d=this.buildURL(l,o,c);"timeout"in n&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new Fs(`${e} must be an integer`);if(t<0)throw new Fs(`${e} must be a positive integer`)})("timeout",n.timeout),n.timeout=null!==(s=n.timeout)&&void 0!==s?s:this.timeout;const{bodyHeaders:u,body:m}=this.buildBody({options:n}),x=await this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:i,headers:x},n.signal&&{signal:n.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),null!==(r=this.fetchOptions)&&void 0!==r?r:{}),null!==(a=n.fetchOptions)&&void 0!==a?a:{}),url:d,timeout:n.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:r}){let a={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const n=await this.authHeaders(e);let i=Br([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),null!=nr?nr:nr=sr()),this._options.defaultHeaders,s,e.headers,n]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Br([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:lr(e)}:this.encoder({body:e,headers:s})}}qr.DEFAULT_TIMEOUT=6e4;class Yr extends qr{constructor(){super(...arguments),this.interactions=new Nr(this)}}Vr=Yr,Yr.GeminiNextGenAPIClient=Vr,Yr.GeminiNextGenAPIClientError=Fs,Yr.APIError=Gs,Yr.APIConnectionError=Hs,Yr.APIConnectionTimeoutError=Vs,Yr.APIUserAbortError=Bs,Yr.NotFoundError=zs,Yr.ConflictError=$s,Yr.RateLimitError=Ws,Yr.BadRequestError=qs,Yr.AuthenticationError=Ys,Yr.InternalServerError=Xs,Yr.PermissionDeniedError=Ks,Yr.UnprocessableEntityError=Js,Yr.toFile=async function(e,t,s){if(dr(),(e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&mr(e))(e=await e))return e instanceof File?e:ur([await e.arrayBuffer()],e.name);if((e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob)(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),ur(await xr(r),t,s)}const r=await xr(e);if(t||(t=function(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}(e)),!(null==s?void 0:s.type)){const e=r.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(s=Object.assign(Object.assign({},s),{type:e}))}return ur(r,t,s)},Yr.Interactions=Nr;const Kr=({user:e,isOpen:t,onToggle:s})=>{const[r,n]=a.useState(!1),i=a.useRef(null),l=void 0!==t?t:r,c=()=>{s?s():n(!r)},d=!!(e&&e.purchasedProductIds.length>0),u=d?"Bonjour, vous êtes en contact avec l’assistance SerrureMaster.\n\nJe suis là pour vous orienter dans l'utilisation de vos guides.\nPour rappel, je ne peux pas fournir d'instructions techniques détaillées ici.\n\nComment puis-je vous aider ?":"Bonjour, vous êtes en contact avec l’assistance SerrureMaster.\n\nNous proposons un accompagnement pédagogique à distance pour certaines situations de serrurerie compatibles.\n\nJe vais vous poser quelques questions pour vérifier votre situation.\n\nLa porte est-elle simplement claquée ou fermée à clé ?",[m,x]=a.useState([{role:"model",text:u,timestamp:Date.now()}]);a.useEffect(()=>{x([{role:"model",text:u,timestamp:Date.now()}])},[d]);const[h,p]=a.useState(""),[f,g]=a.useState(!1);a.useEffect(()=>{requestAnimationFrame(()=>{var e;null==(e=i.current)||e.scrollIntoView({behavior:"smooth",block:"end"})})},[m,l,f]);const b=async()=>{if(!h.trim()||f)return;const e={role:"user",text:h,timestamp:Date.now()};x(t=>[...t,e]),p(""),g(!0),m.map(e=>({role:e.role,parts:[{text:e.text}]}));const t={role:"model",text:await(async()=>"Le chatbot est temporairement indisponible. Veuillez nous contacter via WhatsApp au +33 7 57 57 03 89 pour une assistance immédiate.")(),timestamp:Date.now()};x(e=>[...e,t]),g(!1)};return ie.jsxs(ie.Fragment,{children:[!l&&ie.jsxs("button",{onClick:c,className:"fixed bottom-6 right-6 bg-green-600 hover:bg-green-700 text-white p-3 sm:p-4 rounded-full shadow-2xl hover:shadow-green-500/40 transition-all duration-300 z-50 flex items-center justify-center animate-bounce-subtle group",children:[ie.jsx(v,{className:"h-5 w-5 sm:h-6 sm:w-6 group-hover:scale-110 transition-transform"}),ie.jsx("span",{className:"ml-2 font-semibold text-xs sm:text-sm hidden sm:inline",children:"Support"})]}),l&&ie.jsxs("div",{className:"fixed bottom-6 right-6 w-[calc(100%-3rem)] sm:w-96 h-[550px] max-h-[80vh] bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden border border-slate-200 animate-slideUp origin-bottom-right",children:[ie.jsxs("div",{className:"bg-slate-900 p-4 flex justify-between items-center text-white shadow-md",children:[ie.jsxs("div",{className:"flex items-center",children:[ie.jsx("div",{className:"bg-white/10 p-1.5 rounded-full mr-3 border border-white/20 backdrop-blur-sm",children:ie.jsx("img",{src:fe,alt:"Bot",className:"h-6 w-6 object-contain",onError:e=>{e.currentTarget.style.display="none"}})}),ie.jsxs("div",{children:[ie.jsxs("h3",{className:"font-bold text-sm",children:["Support ",ie.jsx("span",{className:"hidden sm:inline",children:"SerrureMaster"})]}),ie.jsxs("div",{className:"flex items-center",children:[ie.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5 animate-pulse"}),ie.jsx("p",{className:"text-xs text-slate-300",children:"En ligne"})]})]})]}),ie.jsx("button",{onClick:c,className:"bg-white/10 p-1.5 rounded-full hover:bg-white/20 transition text-slate-300 hover:text-white","aria-label":"Fermer le chat",children:ie.jsx(o,{className:"h-4 w-4"})})]}),ie.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-[#e5ddd5] space-y-4 scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent bg-opacity-30",children:[ie.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:'url("https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png")',backgroundSize:"400px"}}),m.map((e,t)=>ie.jsxs("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"} relative z-10`,children:["model"===e.role&&ie.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex-shrink-0 mr-2 mt-auto flex items-center justify-center border border-slate-300",children:ie.jsx(T,{className:"w-3 h-3 text-slate-600"})}),ie.jsxs("div",{className:"max-w-[80%] p-3.5 rounded-2xl text-sm leading-relaxed whitespace-pre-line shadow-sm "+("user"===e.role?"bg-[#dcf8c6] text-slate-900 rounded-br-sm border border-green-200":"bg-white border border-slate-100 text-slate-800 rounded-bl-sm"),children:[e.text,ie.jsx("div",{className:"text-[9px] text-right mt-1 "+("user"===e.role?"text-green-800/60":"text-slate-400"),children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},t)),f&&ie.jsxs("div",{className:"flex justify-start relative z-10",children:[ie.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex-shrink-0 mr-2 mt-auto flex items-center justify-center",children:ie.jsx(T,{className:"w-3 h-3 text-slate-600"})}),ie.jsxs("div",{className:"bg-white border border-slate-100 p-4 rounded-2xl rounded-bl-sm flex items-center space-x-1.5 shadow-sm",children:[ie.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),ie.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),ie.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),ie.jsx("div",{ref:i})]}),ie.jsx("div",{className:"p-3 bg-[#f0f2f5] border-t border-slate-200",children:ie.jsxs("div",{className:"flex items-center bg-white rounded-full px-1 py-1 border border-transparent focus-within:border-green-300 focus-within:ring-2 focus-within:ring-green-100 transition-all shadow-sm",children:[ie.jsx("label",{htmlFor:"chatbot-input",className:"sr-only",children:"Écrivez votre message"}),ie.jsx("input",{id:"chatbot-input",type:"text",value:h,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&b()},placeholder:"Écrivez un message...",className:"flex-1 bg-transparent border-none outline-none text-sm text-slate-800 placeholder-slate-500 px-4 py-2",autoFocus:!0}),ie.jsx("button",{onClick:b,disabled:f||!h.trim(),"aria-label":"Envoyer le message",className:"p-2 rounded-full transition-all duration-200 "+(h.trim()?"bg-green-600 text-white shadow-md hover:scale-105 active:scale-95":"bg-slate-200 text-slate-400 cursor-not-allowed"),children:f?ie.jsx(A,{className:"h-4 w-4 animate-spin"}):ie.jsx(S,{className:"h-4 w-4"})})]})})]})]})},zr=({onAcceptAll:e,onRefuseAll:t,onSavePreferences:s,onLearnMore:r})=>{const[n,i]=a.useState(!1),[l,o]=a.useState({necessary:!0,analytics:!1,marketing:!1}),d=e=>{"necessary"!==e&&o(t=>({...t,[e]:!t[e]}))};return ie.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[100] bg-slate-900 border-t border-slate-800 shadow-[0_-10px_40px_-10px_rgba(0,0,0,0.5)] animate-[slideUp_0.5s_ease-out]",children:[ie.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6",children:[ie.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start md:items-center justify-between mb-4",children:[ie.jsxs("div",{className:"flex items-start gap-4",children:[ie.jsx("div",{className:"bg-slate-800 p-3 rounded-xl flex-shrink-0 border border-slate-700 hidden sm:block",children:ie.jsx(c,{className:"w-8 h-8 text-orange-500"})}),ie.jsxs("div",{children:[ie.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:"Votre vie privée nous appartient... non, on rigole."}),ie.jsx("p",{className:"text-slate-300 text-sm leading-relaxed max-w-3xl",children:"Conformément au RGPD, vous avez le choix. Nous utilisons des cookies pour sécuriser votre espace membre (essentiels) et, si vous l'acceptez, pour améliorer nos guides (analytiques)."})]})]}),ie.jsxs("div",{className:"hidden lg:flex gap-3 flex-shrink-0",children:[ie.jsx("button",{onClick:()=>i(!n),className:"px-4 py-2.5 text-slate-300 font-medium hover:text-white underline decoration-slate-600 hover:decoration-white transition text-sm",children:"Personnaliser"}),ie.jsx("button",{onClick:t,className:"px-6 py-2.5 bg-slate-800 text-white font-semibold rounded-lg hover:bg-slate-700 border border-slate-700 transition text-sm",children:"Tout refuser"}),ie.jsx("button",{onClick:e,className:"px-6 py-2.5 bg-orange-600 text-white font-bold rounded-lg hover:bg-orange-500 shadow-lg hover:shadow-orange-500/25 transition text-sm",children:"Tout accepter"})]})]}),n&&ie.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700 mb-6 animate-fade-in",children:[ie.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[ie.jsxs("div",{className:"flex items-start gap-3 opacity-70 cursor-not-allowed",title:"Obligatoire",children:[ie.jsx("div",{className:"mt-1",children:ie.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded flex items-center justify-center",children:ie.jsx(O,{className:"w-3 h-3 text-white"})})}),ie.jsxs("div",{children:[ie.jsx("h4",{className:"text-white font-bold text-sm",children:"Essentiels (Obligatoire)"}),ie.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Nécessaires pour l'espace membre, le panier et la sécurité des paiements."})]})]}),ie.jsxs("div",{className:"flex items-start gap-3 cursor-pointer group",onClick:()=>d("analytics"),children:[ie.jsx("div",{className:"mt-1 relative",children:ie.jsx("div",{className:"w-5 h-5 rounded border flex items-center justify-center transition-colors "+(l.analytics?"bg-orange-500 border-orange-500":"bg-slate-900 border-slate-600"),children:l.analytics&&ie.jsx(O,{className:"w-3 h-3 text-white"})})}),ie.jsxs("div",{children:[ie.jsx("h4",{className:"text-white font-bold text-sm group-hover:text-orange-400 transition",children:"Analytique & Performance"}),ie.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Nous aide à comprendre quelles vidéos sont les plus regardées pour les améliorer."})]})]}),ie.jsxs("div",{className:"flex items-start gap-3 cursor-pointer group",onClick:()=>d("marketing"),children:[ie.jsx("div",{className:"mt-1 relative",children:ie.jsx("div",{className:"w-5 h-5 rounded border flex items-center justify-center transition-colors "+(l.marketing?"bg-orange-500 border-orange-500":"bg-slate-900 border-slate-600"),children:l.marketing&&ie.jsx(O,{className:"w-3 h-3 text-white"})})}),ie.jsxs("div",{children:[ie.jsx("h4",{className:"text-white font-bold text-sm group-hover:text-orange-400 transition",children:"Publicité Ciblée"}),ie.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Permet de vous proposer des offres pertinentes (nous en utilisons très peu)."})]})]})]}),ie.jsx("div",{className:"mt-6 flex justify-end pt-4 border-t border-slate-700",children:ie.jsx("button",{onClick:()=>{s(l)},className:"px-6 py-2 bg-white text-slate-900 font-bold rounded-lg hover:bg-slate-200 transition text-sm",children:"Enregistrer mes choix"})})]}),ie.jsxs("div",{className:"flex flex-col gap-3 lg:hidden mt-4",children:[ie.jsx("button",{onClick:e,className:"w-full py-3 bg-orange-600 text-white font-bold rounded-lg",children:"Tout accepter"}),ie.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ie.jsx("button",{onClick:t,className:"w-full py-3 bg-slate-800 text-white font-semibold rounded-lg border border-slate-700",children:"Tout refuser"}),ie.jsx("button",{onClick:()=>i(!n),className:"w-full py-3 bg-transparent text-slate-300 font-medium border border-slate-700 rounded-lg",children:n?"Masquer":"Personnaliser"})]})]}),ie.jsx("div",{className:"mt-4 text-center lg:text-left",children:ie.jsx("button",{onClick:r,className:"text-xs text-slate-500 hover:text-slate-300 underline",children:"Lire notre politique de confidentialité complète"})})]}),ie.jsx("style",{children:"\n        @keyframes slideUp {\n          from { transform: translateY(100%); }\n          to { transform: translateY(0); }\n        }\n      "})]})};let $r=!0,Jr=null;{const e=[];e.push("VITE_SUPABASE_URL"),e.push("VITE_SUPABASE_ANON_KEY"),$r=!1,Jr=`⚠️ Configuration Supabase manquante: ${e.join(", ")}. Ajoutez-les dans .env.production.local puis: npm run build && npm run preview`}const Wr=W("https://placeholder.supabase.co","placeholder-key"),Xr=({onLoginSuccess:e,onBack:t})=>{const[s,r]=a.useState(""),[n,i]=a.useState("idle"),[l,o]=a.useState(null);return ie.jsxs("div",{className:"min-h-[calc(100vh-64px)] bg-slate-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative overflow-hidden",children:[ie.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0",children:[ie.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-orange-600/10 rounded-full blur-[100px]"}),ie.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-600/10 rounded-full blur-[100px]"})]}),ie.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md relative z-10",children:[ie.jsx("div",{className:"flex justify-center mb-6",children:ie.jsx("div",{className:"bg-slate-800 p-6 rounded-3xl border border-slate-700 shadow-xl",children:ie.jsx("img",{src:fe,alt:pe,className:"h-16 w-auto object-contain",onError:e=>{e.currentTarget.style.display="none"}})})}),ie.jsx("h2",{className:"mt-2 text-center text-3xl font-extrabold text-white",children:"Connexion Sécurisée"}),ie.jsx("p",{className:"mt-2 text-center text-sm text-slate-400",children:"Accédez à votre Espace Membre et à vos guides."})]}),ie.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md relative z-10",children:[ie.jsx("div",{className:"bg-white/5 backdrop-blur-lg border border-slate-700 py-8 px-4 shadow-2xl rounded-xl sm:px-10",children:"idle"===n||"loading"===n?ie.jsxs("form",{className:"space-y-6",onSubmit:async e=>{if(e.preventDefault(),s&&s.includes("@")){o(null),i("loading");try{const{error:e}=await Wr.auth.signInWithOtp({email:s,options:{emailRedirectTo:window.location.origin}});if(e)throw e;i("sent")}catch(t){t.message&&(t.message.includes("Failed to fetch")||t.message.includes("NetworkError")||t.message.includes("network"))?o("⚠️ Serveur inaccessible (Mode Démo). Veuillez utiliser le bouton 'Connexion Démo' ci-dessous."):o(t.message||"Impossible d'envoyer le lien. Vérifiez votre email."),i("idle")}}else o("Veuillez entrer une adresse email valide.")},children:[ie.jsxs("div",{children:[ie.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-300",children:"Adresse Email"})," ",ie.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-300 mb-2",children:"Adresse email"})," ",ie.jsxs("div",{className:"mt-2 relative rounded-md shadow-sm",children:[ie.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:ie.jsx(R,{className:"h-5 w-5 text-slate-500","aria-hidden":"true"})}),ie.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:e=>r(e.target.value),className:"block w-full pl-10 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:ring-orange-500 focus:border-orange-500 sm:text-sm py-3 transition-colors",placeholder:"vous@exemple.com"})]}),l&&ie.jsxs("div",{className:"mt-2 flex items-start text-sm text-red-400 bg-red-900/20 p-2 rounded border border-red-900/50 animate-pulse",children:[ie.jsx(p,{className:"w-4 h-4 mr-2 flex-shrink-0 mt-0.5"}),ie.jsx("span",{children:l})]})]}),ie.jsx("div",{children:ie.jsx("button",{type:"submit",disabled:"loading"===n,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-bold text-white bg-orange-600 hover:bg-orange-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-orange-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"loading"===n?ie.jsxs(ie.Fragment,{children:[ie.jsx(A,{className:"animate-spin -ml-1 mr-2 h-5 w-5"}),"Connexion..."]}):ie.jsxs(ie.Fragment,{children:["Recevoir mon lien de connexion",ie.jsx(h,{className:"ml-2 h-5 w-5"})]})})}),ie.jsxs("div",{className:"relative my-4",children:[ie.jsx("div",{className:"absolute inset-0 flex items-center",children:ie.jsx("div",{className:"w-full border-t border-slate-700"})}),ie.jsx("div",{className:"relative flex justify-center text-sm",children:ie.jsx("span",{className:"px-2 bg-slate-800/0 text-slate-500 backdrop-blur",children:"Ou"})})]}),ie.jsx("div",{children:ie.jsxs("button",{type:"button",onClick:()=>{e("demo@serruremaster.com")},className:"w-full flex justify-center items-center py-2 px-4 border border-slate-600 rounded-lg text-sm font-medium text-slate-300 hover:bg-slate-800 hover:text-white transition-colors hover:border-orange-500/50",children:[ie.jsx(C,{className:"w-4 h-4 mr-2"}),"Connexion Démo (Sans Email)"]})}),ie.jsxs("div",{className:"mt-4",children:[ie.jsxs("div",{className:"relative",children:[ie.jsx("div",{className:"absolute inset-0 flex items-center",children:ie.jsx("div",{className:"w-full border-t border-slate-600"})}),ie.jsx("div",{className:"relative flex justify-center text-sm",children:ie.jsx("span",{className:"px-2 bg-slate-800 text-slate-400 rounded",children:"Sécurité"})})]}),ie.jsxs("div",{className:"mt-4 flex justify-center space-x-4 text-xs text-slate-500",children:[ie.jsxs("div",{className:"flex items-center",children:[ie.jsx(c,{className:"w-3 h-3 mr-1 text-green-500"})," Chiffrement SSL"]}),ie.jsxs("div",{className:"flex items-center",children:[ie.jsx(c,{className:"w-3 h-3 mr-1 text-green-500"})," Sans mot de passe"]})]})]})]}):ie.jsx("div",{className:"text-center py-4",children:"sent"===n&&ie.jsxs("div",{className:"animate-fade-in",children:[ie.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-6",children:ie.jsx(R,{className:"h-8 w-8 text-green-600"})}),ie.jsx("h3",{className:"text-lg leading-6 font-medium text-white mb-2",children:"Vérifiez vos emails"}),ie.jsxs("p",{className:"text-sm text-slate-300 mb-6",children:["Nous avons envoyé un lien de connexion magique à ",ie.jsx("strong",{children:s}),".",ie.jsx("br",{}),ie.jsx("br",{}),"Cliquez sur le lien dans l'email pour vous connecter instantanément à votre espace sécurisé."]}),ie.jsx("button",{onClick:()=>i("idle"),className:"text-xs text-slate-500 underline",children:"Renvoyer un lien ou changer d'email"})]})})}),ie.jsx("div",{className:"mt-6 text-center",children:ie.jsx("button",{onClick:t,className:"text-sm text-slate-400 hover:text-white transition",children:"← Retour à l'accueil"})})]})]})},Zr=()=>ie.jsx("section",{className:"py-24 bg-white",children:ie.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[ie.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[ie.jsx("h2",{className:"text-3xl font-extrabold text-slate-900 mb-4",children:"L'expertise technique. La sécurité juridique."}),ie.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Accédez au savoir-faire d'un artisan serrurier pour traiter une urgence sans intervention extérieure, dans le strict respect de l'intégrité de votre matériel."})]}),ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[ie.jsxs("div",{className:"md:col-span-2 bg-slate-900 rounded-3xl p-8 relative overflow-hidden group",children:[ie.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl -mr-16 -mt-16 transition group-hover:bg-orange-500/20"}),ie.jsxs("div",{className:"relative z-10",children:[ie.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-2xl flex items-center justify-center mb-6",children:ie.jsx(D,{className:"w-6 h-6 text-white"})}),ie.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Protocole Non-Destructif"}),ie.jsx("p",{className:"text-slate-400 text-lg max-w-lg",children:"Priorité absolue à l'ouverture fine. Nos plans d'action vous guident vers des méthodes professionnelles douces pour tenter l'ouverture sans endommager votre serrure ni votre porte."})]})]}),ie.jsxs("div",{className:"bg-orange-50 rounded-3xl p-8 border border-orange-100 relative overflow-hidden",children:[ie.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-2xl flex items-center justify-center mb-6",children:ie.jsx(L,{className:"w-6 h-6 text-orange-600"})}),ie.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Disponibilité Immédiate"}),ie.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:"Votre urgence n'attend pas. Accédez à votre Espace Membre sécurisé et aux supports vidéo dès la validation de la commande."})]}),ie.jsxs("div",{className:"bg-slate-50 rounded-3xl p-8 border border-slate-200",children:[ie.jsx("div",{className:"w-12 h-12 bg-white shadow-sm rounded-2xl flex items-center justify-center mb-6",children:ie.jsx(P,{className:"w-6 h-6 text-slate-700"})}),ie.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Cadre & Conformité"}),ie.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:"Usage strictement réservé aux occupants légitimes. Nos guides intègrent systématiquement les rappels légaux et de sécurité."})]}),ie.jsx("div",{className:"md:col-span-2 bg-gradient-to-br from-slate-100 to-white rounded-3xl p-8 border border-slate-200 relative overflow-hidden",children:ie.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[ie.jsxs("div",{className:"flex-1",children:[ie.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center mb-6",children:ie.jsx(U,{className:"w-6 h-6 text-blue-600"})}),ie.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Validation Technique Incluse"}),ie.jsxs("p",{className:"text-slate-600 text-lg",children:["Un doute sur votre type de serrure ? Envoyez une photo via WhatsApp. ",ie.jsx("br",{}),"Un expert confirme la compatibilité de la méthode en temps réel avant toute action."]})]}),ie.jsx("div",{className:"w-full md:w-1/3",children:ie.jsxs("div",{className:"space-y-3 opacity-90",children:[ie.jsx("div",{className:"bg-white p-3 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 text-xs text-slate-600",children:"Bonjour, ma porte n'a pas de poignée extérieure, est-ce compatible ?"}),ie.jsx("div",{className:"bg-blue-600 text-white p-3 rounded-2xl rounded-tr-none shadow-md text-xs ml-auto",children:"Oui, c'est une configuration palière standard. Le module 2 du guide détaille le geste précis pour ce cas."})]})})]})})]})]})}),Qr=[{icon:M,title:"1. Diagnostic d'éligibilité",desc:"Vérifiez impérativement que votre situation (ex: porte claquée non verrouillée) est compatible avec nos protocoles d'ouverture fine."},{icon:I,title:"2. Accès au protocole",desc:"Obtenez instantanément le plan d'action vidéo et PDF. Un contenu technique conçu pour être appliqué par des non-professionnels."},{icon:k,title:"3. Application guidée",desc:"Suivez la méthodologie pas à pas. Nos supports vous indiquent les gestes précis à effectuer et les erreurs critiques à éviter."},{icon:c,title:"4. Résolution maîtrisée",desc:"Tentez l'ouverture sans dégradation. Si la méthode ne suffit pas, vous aurez évité d'aggraver la situation pour le dépanneur."}],ea=()=>ie.jsx("section",{className:"py-20 bg-slate-50 border-t border-slate-200",children:ie.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[ie.jsxs("div",{className:"text-center mb-16",children:[ie.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Votre plan d'action en 4 étapes"}),ie.jsx("p",{className:"text-slate-400 mt-4 max-w-2xl mx-auto",children:"Une démarche structurée pour intervenir calmement, avec les bons outils et la bonne méthode."})]}),ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:Qr.map((e,t)=>ie.jsxs("div",{className:"relative flex flex-col items-center text-center group",children:[ie.jsxs("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm border border-slate-200 flex items-center justify-center mb-6 z-10 relative group-hover:border-orange-500/50 group-hover:shadow-md transition-all",children:[ie.jsx(e.icon,{className:"w-8 h-8 text-slate-700 group-hover:text-orange-600 transition-colors"}),ie.jsx("div",{className:"absolute -top-3 -right-3 w-7 h-7 bg-slate-900 rounded-lg text-white text-sm font-bold flex items-center justify-center border-2 border-slate-50",children:t+1})]}),t!==Qr.length-1&&ie.jsx("div",{className:"hidden md:block absolute top-8 left-1/2 w-full h-0.5 bg-slate-200 -z-0"}),ie.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-3",children:e.title}),ie.jsx("p",{className:"text-sm text-slate-600 px-2 leading-relaxed",children:e.desc})]},t))})]})}),ta=[{id:"t1",name:"Sophie M.",role:"Paris 15ème",text:"J'ai économisé 450€ un dimanche soir. Le guide vidéo sur la radio est incroyable, porte ouverte en 3 minutes !",rating:5,approved:!0,date:"2023-11-01",source:"trustpilot"},{id:"t2",name:"Karim B.",role:"Lyon",text:"Sceptique au début, mais la méthode du kit de survie fonctionne. Merci pour l'honnêteté.",rating:5,approved:!0,date:"2023-11-05",source:"google"},{id:"t3",name:"Julie D.",role:"Marseille",text:"Le support WhatsApp m'a sauvé. J'étais paniquée, Thomas m'a calmée et guidée.",rating:4,approved:!0,date:"2023-10-20",source:"email"}],sa=a.createContext(void 0),ra=({children:e})=>{const[t,s]=a.useState(ta);return a.useEffect(()=>{(async()=>{try{const{data:e,error:t}=await Wr.from("testimonials").select("*").order("created_at",{ascending:!1});if(t)throw t;e&&e.length>0&&s(e)}catch(e){}})()},[]),ie.jsx(sa.Provider,{value:{testimonials:t,addTestimonial:async e=>{const t="temp_"+Date.now(),r={...e,id:t,date:(new Date).toISOString(),approved:!1};s(e=>[r,...e]);try{const{data:r,error:a}=await Wr.from("testimonials").insert([{name:e.name,role:e.role,text:e.text,rating:e.rating,approved:!1,source:e.source}]).select().single();if(a)throw a;r&&s(e=>e.map(e=>e.id===t?r:e))}catch(a){}},updateTestimonial:async(e,t)=>{s(s=>s.map(s=>s.id===e?{...s,...t}:s));try{await Wr.from("testimonials").update(t).eq("id",e)}catch(r){}},deleteTestimonial:async e=>{s(t=>t.filter(t=>t.id!==e));try{await Wr.from("testimonials").delete().eq("id",e)}catch(t){}},toggleApproval:async e=>{const r=t.find(t=>t.id===e);if(!r)return;const a=!r.approved;s(t=>t.map(t=>t.id===e?{...t,approved:a}:t));try{await Wr.from("testimonials").update({approved:a}).eq("id",e)}catch(n){s(t=>t.map(t=>t.id===e?{...t,approved:!a}:t))}},resetTestimonials:()=>{s(ta)}},children:e})},aa=()=>{const e=a.useContext(sa);if(void 0===e)throw new Error("useTestimonials must be used within a TestimonialProvider");return e},na=()=>{const{testimonials:e}=aa(),t=e.filter(e=>e.approved).slice(0,3);return ie.jsx("section",{className:"py-24 bg-slate-900 text-white",children:ie.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[ie.jsxs("div",{className:"text-center mb-16",children:[ie.jsx("h2",{className:"text-3xl font-bold text-white",children:"Ils ont ouvert leur porte seuls"}),ie.jsx("p",{className:"text-slate-300 mt-4",children:"Plus de 5000 clients satisfaits. Voici leurs retours."})]}),ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map(e=>ie.jsxs("div",{className:"bg-slate-800 rounded-2xl p-8 relative",children:[ie.jsx(F,{className:"absolute top-6 right-6 w-8 h-8 text-slate-700 opacity-50"}),ie.jsx("div",{className:"flex gap-1 mb-6",children:[...Array(5)].map((t,s)=>ie.jsx(G,{className:"w-4 h-4 "+(s<e.rating?"fill-orange-500 text-orange-500":"text-slate-600")},s))}),ie.jsxs("p",{className:"text-slate-300 mb-6 italic min-h-[80px]",children:['"',e.text,'"']}),ie.jsxs("div",{className:"flex items-center",children:[ie.jsx("div",{className:"w-10 h-10 bg-slate-700 rounded-full flex items-center justify-center font-bold text-sm text-slate-300",children:e.name.charAt(0)}),ie.jsxs("div",{className:"ml-3",children:[ie.jsx("p",{className:"font-bold text-sm text-white",children:e.name}),ie.jsx("p",{className:"text-xs text-slate-400",children:e.role})]})]})]},e.id))})]})})},ia=[{q:"Est-ce vraiment légal d'ouvrir sa porte ?",a:"Oui, tant que vous êtes l'occupant légitime du logement (propriétaire ou locataire avec bail). Nos guides rappellent systématiquement ce cadre légal."},{q:"Et si je n'y arrive pas ?",a:"Nos méthodes fonctionnent dans 90% des cas (porte claquée simple). Si vous échouez, nous vous conseillons d'arrêter pour ne rien casser. Vous aurez économisé le temps d'attente d'un serrurier avant de l'appeler en dernier recours."},{q:"Ai-je besoin d'outils spéciaux ?",a:"Non. Les méthodes enseignées utilisent uniquement du matériel domestique courant. Aucun outil professionnel n'est requis."},{q:"Puis-je me faire rembourser ?",a:"S'agissant de produits numériques avec accès immédiat, le droit de rétractation ne s'applique pas une fois le contenu consommé, conformément à la loi. Cependant, nous étudions les réclamations au cas par cas si le guide n'a pas été téléchargé/visionné."}],la=()=>{const[e,t]=a.useState(null);return ie.jsx("section",{className:"py-20 bg-white",children:ie.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[ie.jsx("div",{className:"text-center mb-12",children:ie.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Questions Fréquentes"})}),ie.jsx("div",{className:"space-y-4",children:ia.map((s,r)=>ie.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[ie.jsxs("button",{className:"w-full px-6 py-4 flex justify-between items-center text-left bg-slate-50 hover:bg-slate-100 transition",onClick:()=>t(e===r?null:r),children:[ie.jsx("span",{className:"font-bold text-slate-900",children:s.q}),e===r?ie.jsx(B,{className:"w-5 h-5 text-slate-500"}):ie.jsx(H,{className:"w-5 h-5 text-slate-500"})]}),e===r&&ie.jsx("div",{className:"px-6 py-4 bg-white text-slate-600 text-sm leading-relaxed border-t border-slate-200",children:s.a})]},r))})]})})},oa=({onOpenChat:e})=>ie.jsxs("section",{className:"py-20 bg-slate-900 border-y border-slate-800 relative overflow-hidden",children:[ie.jsx("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:ie.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-[600px] h-[600px] bg-green-500/5 rounded-full blur-[100px]"})}),ie.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[ie.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-12",children:[ie.jsxs("div",{className:"inline-flex items-center space-x-2 bg-slate-800/50 border border-slate-700 rounded-full px-4 py-1.5 mb-6",children:[ie.jsxs("span",{className:"relative flex h-2 w-2",children:[ie.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),ie.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),ie.jsx("span",{className:"text-slate-300 text-xs font-bold tracking-wider uppercase",children:"Support Connecté"})]}),ie.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-white mb-6",children:"Une question ? Deux niveaux d'assistance."}),ie.jsx("p",{className:"text-lg text-slate-400 leading-relaxed",children:"Pour garantir un service pédagogique de qualité sans fausse promesse, nous distinguons l'orientation immédiate de l'expertise humaine."})]}),ie.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[ie.jsxs("div",{className:"bg-slate-800 rounded-2xl p-8 border border-slate-700 flex flex-col relative group hover:border-slate-600 transition-all",children:[ie.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-10",children:ie.jsx(T,{className:"w-24 h-24 text-white"})}),ie.jsxs("div",{className:"mb-6",children:[ie.jsx("div",{className:"w-14 h-14 bg-slate-700 rounded-xl flex items-center justify-center mb-4",children:ie.jsx(T,{className:"w-7 h-7 text-white"})}),ie.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Assistant Virtuel (IA)"}),ie.jsx("p",{className:"text-sm text-slate-400 font-medium uppercase tracking-wide",children:"Premier contact & Éligibilité"})]}),ie.jsxs("ul",{className:"space-y-4 mb-8 flex-1",children:[ie.jsxs("li",{className:"flex items-start text-slate-300 text-sm",children:[ie.jsx(V,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),ie.jsx("span",{children:"Diagnostic de compatibilité immédiat"})]}),ie.jsxs("li",{className:"flex items-start text-slate-300 text-sm",children:[ie.jsx(V,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),ie.jsx("span",{children:"Disponible 24h/24 et 7j/7"})]}),ie.jsxs("li",{className:"flex items-start text-slate-300 text-sm",children:[ie.jsx(V,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),ie.jsx("span",{children:"Orientation vers le bon guide PDF/Vidéo"})]})]}),ie.jsxs("button",{onClick:e,className:"w-full py-4 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-200 transition-colors flex items-center justify-center",children:["Lancer le diagnostic gratuit",ie.jsx(h,{className:"w-5 h-5 ml-2"})]}),ie.jsx("p",{className:"text-center text-[10px] text-slate-400 mt-3",children:"Réponse instantanée automatisée"})]}),ie.jsxs("div",{className:"bg-green-900/20 rounded-2xl p-8 border border-green-500/30 flex flex-col relative group hover:border-green-500/50 transition-all",children:[ie.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-10",children:ie.jsx(v,{className:"w-24 h-24 text-green-500"})}),ie.jsxs("div",{className:"mb-6",children:[ie.jsx("div",{className:"w-14 h-14 bg-green-900/30 rounded-xl flex items-center justify-center mb-4 border border-green-500/30",children:ie.jsx(v,{className:"w-7 h-7 text-green-500"})}),ie.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Expert SerrureMaster"}),ie.jsx("p",{className:"text-sm text-green-400 font-medium uppercase tracking-wide",children:"Validation Visuelle Humaine"})]}),ie.jsxs("ul",{className:"space-y-4 mb-8 flex-1",children:[ie.jsxs("li",{className:"flex items-start text-slate-300 text-sm",children:[ie.jsx(V,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),ie.jsx("span",{children:"Analyse de votre serrure sur photo"})]}),ie.jsxs("li",{className:"flex items-start text-slate-300 text-sm",children:[ie.jsx(V,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),ie.jsx("span",{children:"Confirmation technique avant achat"})]}),ie.jsxs("li",{className:"flex items-start text-slate-300 text-sm",children:[ie.jsx(q,{className:"w-5 h-5 text-orange-500 mr-3 flex-shrink-0"}),ie.jsx("span",{children:"Délai de réponse variable (heures ouvrées)"})]})]}),ie.jsxs("a",{href:"https://wa.me/33757570389",target:"_blank",rel:"noopener noreferrer",className:"w-full py-4 bg-[#25D366] hover:bg-[#20bd5a] text-white font-bold rounded-xl transition-colors flex items-center justify-center shadow-lg shadow-green-900/20",children:[ie.jsx(v,{className:"w-5 h-5 mr-2"}),"Contacter le Support Pro"]}),ie.jsx("p",{className:"text-center text-[10px] text-slate-400 mt-3",children:"WhatsApp Business Officiel"})]})]}),ie.jsxs("div",{className:"max-w-4xl mx-auto mt-12 bg-slate-800/50 rounded-lg p-4 border border-slate-700 flex items-start gap-4",children:[ie.jsx(Y,{className:"w-6 h-6 text-slate-400 flex-shrink-0 mt-0.5"}),ie.jsxs("div",{className:"text-xs text-slate-400 leading-relaxed",children:[ie.jsx("strong",{className:"text-slate-300 block mb-1",children:"Cadre d'intervention et Responsabilité :"}),"L'assistance WhatsApp (IA ou Humaine) a pour unique vocation de qualifier votre situation et de vous orienter vers le produit adapté.",ie.jsxs("span",{className:"text-orange-400",children:[" ","Aucune instruction technique détaillée d'ouverture ne sera transmise par message."]}),"Ce canal ne constitue pas un service de dépannage à distance ni une garantie de résultat. En cas d'urgence vitale ou de blocage complexe, faites appel à un professionnel sur place."]})]})]})]}),ca=a.createContext(void 0),da=({children:e})=>{const[t,s]=a.useState(ge),[r,n]=a.useState(Ne);return a.useEffect(()=>{(async()=>{try{const{data:e,error:t}=await Wr.from("products").select("*");if(t)throw t;if(e&&e.length>0){const t=e.map(e=>({id:e.id,title:e.title,description:e.description||"",price:e.price,originalPrice:e.original_price,image:e.image,stripePriceId:e.stripe_price_id,type:e.type||"bundle",features:e.features||[],compatibility:e.compatibility,currentResource:null}));s(t)}}catch(e){}})()},[]),ie.jsx(ca.Provider,{value:{products:t,courses:r,updateProductImage:async(e,t)=>{s(s=>s.map(s=>s.id===e?{...s,image:t}:s));try{await Wr.from("products").update({image:t}).eq("id",e)}catch(r){}},updateProductDetails:async(e,t)=>{s(s=>s.map(s=>s.id===e?{...s,...t}:s));try{await Wr.from("products").update(t).eq("id",e)}catch(r){}},resetProducts:async()=>{},uploadProductResource:async(e,t)=>{await new Promise(e=>setTimeout(e,1500));const r={id:"res_"+Date.now(),productId:e,fileName:t.name,filePath:`secure-pdfs/${e}/${t.name}`,fileSize:(t.size/1024/1024).toFixed(2)+" MB",status:"draft",version:1,lastUpdated:(new Date).toISOString()};s(t=>t.map(t=>t.id===e?{...t,currentResource:r}:t))},updateResourceStatus:(e,t)=>{s(s=>s.map(s=>s.id===e&&s.currentResource?{...s,currentResource:{...s.currentResource,status:t}}:s))},addModule:(e,t)=>{n(s=>{const r=s[e]||{productId:e,modules:[]},a={id:`mod_${Date.now()}`,title:t,status:"draft",lessons:[]};return{...s,[e]:{...r,modules:[...r.modules,a]}}})},addLesson:(e,t,s)=>{n(r=>{const a=r[e];if(!a)return r;const n={...s,id:`les_${Date.now()}`,status:"draft"};return{...r,[e]:{...a,modules:a.modules.map(e=>e.id===t?{...e,lessons:[...e.lessons,n]}:e)}}})},updateLessonStatus:(e,t,s,r)=>{n(a=>{const n=a[e];return n?{...a,[e]:{...n,modules:n.modules.map(e=>e.id===t?{...e,lessons:e.lessons.map(e=>e.id===s?{...e,status:r}:e)}:e)}}:a})},updateLessonDetails:(e,t,s,r)=>{n(a=>{const n=a[e];return n?{...a,[e]:{...n,modules:n.modules.map(e=>e.id===t?{...e,lessons:e.lessons.map(e=>e.id===s?{...e,...r}:e)}:e)}}:a})}},children:e})},ua=()=>{const e=a.useContext(ca);if(void 0===e)throw new Error("useProducts must be used within a ProductProvider");return e},ma=a.lazy(()=>de(()=>import("./Dashboard-xx7WiZ9A.js"),__vite__mapDeps([0,1,2,3])).then(e=>({default:e.Dashboard}))),xa=a.lazy(()=>de(()=>import("./AdminDashboard-BLBdFlKA.js"),__vite__mapDeps([4,1,2,3])).then(e=>({default:e.AdminDashboard}))),ha=a.lazy(()=>de(()=>import("./CoursePlayer-ruEKvhGC.js"),__vite__mapDeps([5,1,2,3])).then(e=>({default:e.CoursePlayer}))),pa=a.lazy(()=>de(()=>import("./CGV-cbWJtRlW.js"),__vite__mapDeps([6,2,1,3])).then(e=>({default:e.CGV}))),fa=a.lazy(()=>de(()=>import("./PrivacyPolicy-CQiLMhh4.js"),__vite__mapDeps([7,2,1,3])).then(e=>({default:e.PrivacyPolicy}))),ga=a.lazy(()=>de(()=>import("./CookiesPolicy-DCGR8YY5.js"),__vite__mapDeps([8,2,1,3])).then(e=>({default:e.CookiesPolicy}))),ba=()=>ie.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:ie.jsxs("div",{className:"text-center",children:[ie.jsx(A,{className:"w-12 h-12 animate-spin text-orange-500 mx-auto mb-4"}),ie.jsx("p",{className:"text-slate-600",children:"Chargement..."})]})}),Na=({children:e,pageKey:t})=>ie.jsx("div",{className:"animate-fade-in w-full min-h-screen",children:e},t),Ea=()=>{var e,t,s,r;const[n,i]=a.useState("home"),[l,o]=a.useState(null),[d,u]=a.useState(null),[m,x]=a.useState(!1),[,h]=a.useState(null),[p,f]=a.useState(!1),[g,b]=a.useState(null),[v,_]=a.useState(!1),{items:I,clearCart:y,toggleCart:w}=xe(),{products:T}=ua(),S="development"===(null==(t=null==(e=import.meta)?void 0:e.env)?void 0:t.MODE),O=null==(r=null==(s=import.meta)?void 0:s.env)?void 0:r.VITE_SUPABASE_URL;let R="";try{R=new URL(O||"").host}catch{R=O||""}a.useEffect(()=>{let e=pe;switch(n){case"dashboard":e=`Espace Membre | ${pe}`;break;case"login":e=`Connexion | ${pe}`;break;case"course":e=`Formation | ${pe}`;break;case"about":e=`Notre Expertise | ${pe}`;break;case"home":e=`${pe} : Ouvrez votre porte sans serrurier`;break;default:e=`${n.charAt(0).toUpperCase()+n.slice(1)} | ${pe}`}document.title=e,window.scrollTo(0,0)},[n]);const C=e=>{u(e),setTimeout(()=>u(null),5e3)},D=async(e,t)=>{try{const{data:s,error:r}=await Wr.from("profiles").select("*").eq("id",e).single();r&&r.code;const{data:a,error:n}=await Wr.from("user_products").select("product_id").eq("user_id",e),i=a?a.map(e=>e.product_id):[];if(s){const e={id:s.id,email:s.email||t,name:s.full_name||t.split("@")[0],purchasedProductIds:i,role:s.role,status:s.status,joinedAt:s.created_at};o(e)}else{const s={id:e,email:t,name:t.split("@")[0],purchasedProductIds:i,role:"user",status:"active"};o(s)}}catch(s){o({id:e,email:t,name:t.split("@")[0],purchasedProductIds:[],role:"user",status:"active"})}};a.useEffect(()=>{const e=localStorage.getItem("serrure_master_consent");e?h(JSON.parse(e)):setTimeout(()=>x(!0),1500),(async()=>{var e;try{const{data:{session:t},error:s}=await Wr.auth.getSession();if(s)throw s;(null==(e=null==t?void 0:t.user)?void 0:e.email)&&await D(t.user.id,t.user.email)}catch{}})();const{data:{subscription:t}}=Wr.auth.onAuthStateChange((e,t)=>{t?!l&&(null==t?void 0:t.user)&&D(t.user.id,t.user.email):o(null)}),s=new URLSearchParams(window.location.search);return"success"===s.get("status")&&(C("✅ Paiement validé ! Bienvenue dans votre espace."),y(),l||o({id:be,email:"client@test.com",name:"Nouveau Client",purchasedProductIds:["p1_door_slammed"],role:"user",status:"active"}),i("dashboard"),window.history.replaceState({},"","/")),"cancel"===s.get("status")&&(C("⚠️ Paiement annulé. Votre panier est conservé."),w(),window.history.replaceState({},"","/")),()=>t.unsubscribe()},[y,w]);const P=e=>{"demo@serruremaster.com"===e||e.includes("test")?(o({id:be,email:e,name:"Utilisateur Démo",purchasedProductIds:["p1_door_slammed","p4_security_pack"],role:e.includes("admin")?"admin":"user",status:"active"}),i(e.includes("admin")?"admin":"dashboard"),C("👋 Bienvenue sur la démo !")):C("📧 Lien de connexion envoyé !")},U=async()=>{try{await Wr.auth.signOut()}catch(e){}o(null),i("home"),C("Vous avez été déconnecté.")},M=e=>{h(e),localStorage.setItem("serrure_master_consent",JSON.stringify(e)),x(!1)},k=()=>{localStorage.removeItem("serrure_master_consent"),h(null),x(!0),C("Préférences cookies réinitialisées.")};return ie.jsxs(_e,{user:l,onNavigate:i,currentPage:n,onLogout:U,onLoginClick:()=>i("login"),onCheckout:async()=>{if(0!==I.length){if(!l)return w(),C("Veuillez vous connecter pour sécuriser votre achat."),void i("login");f(!0);try{await(async(e,t)=>{try{if(t.filter(e=>!e.stripePriceId).length>0)throw new Error("Certains produits n'ont pas de Price ID Stripe configuré");const s={userId:e,items:t.map(e=>({priceId:e.stripePriceId,quantity:e.quantity})),successUrl:`${window.location.origin}/dashboard?status=success`,cancelUrl:`${window.location.origin}/?status=cancel`},{data:r,error:a}=await Wr.functions.invoke("stripe-checkout",{body:s});if(a)throw a;if(!(null==r?void 0:r.url))throw new Error("Pas d'URL de redirection retournée par Stripe");window.location.href=r.url}catch(s){throw s}})(l.id,I)}catch(e){setTimeout(()=>{f(!1),window.confirm("Mode Démo : Supabase/Stripe non connectés.\nVoulez-vous simuler un paiement RÉUSSI ?")?window.location.href="/?status=success":C("Paiement annulé (Simulation).")},1e3)}}},children:[d&&ie.jsxs("div",{className:"fixed top-24 right-4 z-[160] bg-slate-800 text-white px-6 py-4 rounded-lg shadow-2xl border border-slate-700 animate-fade-in-down flex items-center",children:[ie.jsx("div",{className:"mr-3",children:d.includes("✅")?ie.jsx(c,{className:"text-green-500"}):ie.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"})}),ie.jsx("div",{children:d}),ie.jsx("button",{onClick:()=>u(null),className:"ml-4 text-slate-500 hover:text-white",children:"✕"})]}),p&&ie.jsxs("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-[200] flex flex-col items-center justify-center text-white",children:[ie.jsx(A,{className:"w-12 h-12 animate-spin text-orange-500 mb-4"}),ie.jsx("h3",{className:"text-xl font-bold",children:"Redirection vers le paiement sécurisé..."}),ie.jsx("p",{className:"text-slate-400 mt-2 text-sm",children:"Veuillez patienter"})]}),ie.jsx(Na,{pageKey:n,children:(()=>{switch(n){case"dashboard":return l?"admin"===l.role?ie.jsx(a.Suspense,{fallback:ie.jsx(ba,{}),children:ie.jsx(xa,{currentUser:l,onLogout:U})}):ie.jsx(a.Suspense,{fallback:ie.jsx(ba,{}),children:ie.jsx(ma,{user:l,onNavigateToCourse:e=>{b(e),i("course")}})}):ie.jsx(Xr,{onLoginSuccess:P,onBack:()=>i("home")});case"course":return l&&g?ie.jsx(a.Suspense,{fallback:ie.jsx(ba,{}),children:ie.jsx(ha,{user:l,productId:g,onBack:()=>i("dashboard")})}):ie.jsx(a.Suspense,{fallback:ie.jsx(ba,{}),children:ie.jsx(ma,{user:l})});case"admin":return l&&"admin"===l.role?ie.jsx(a.Suspense,{fallback:ie.jsx(ba,{}),children:ie.jsx(xa,{currentUser:l,onLogout:U})}):ie.jsx(Xr,{onLoginSuccess:P,onBack:()=>i("home")});case"login":return ie.jsx(Xr,{onLoginSuccess:P,onBack:()=>i("home")});case"cgv":return ie.jsx(a.Suspense,{fallback:ie.jsx(ba,{}),children:ie.jsx(pa,{onBack:()=>i("home")})});case"privacy":return ie.jsx(a.Suspense,{fallback:ie.jsx(ba,{}),children:ie.jsx(fa,{onBack:()=>i("home")})});case"cookies":return ie.jsx(a.Suspense,{fallback:ie.jsx(ba,{}),children:ie.jsx(ga,{onBack:()=>i("home"),onReset:k})});case"about":return ie.jsx("div",{className:"pt-20 pb-20 bg-slate-50 min-h-screen font-sans",children:ie.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[ie.jsxs("div",{className:"text-center mb-16",children:[ie.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm border border-slate-200 flex items-center justify-center mx-auto mb-6",children:ie.jsx(z,{className:"w-8 h-8 text-slate-700"})}),ie.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-6 tracking-tight",children:["Une expertise professionnelle, ",ie.jsx("br",{}),"transmise à distance"]}),ie.jsx("div",{className:"text-lg text-slate-600 leading-relaxed max-w-2xl mx-auto",children:ie.jsx("p",{children:"Ce service repose sur une expérience professionnelle de terrain et sur une approche pédagogique structurée. Les plans d’action proposés sont conçus pour expliquer, guider et accompagner, dans un cadre strictement légal et non destructif."})})]}),ie.jsxs("div",{className:"space-y-10",children:[ie.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200",children:[ie.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-4",children:"Chaque contenu est pensé pour :"}),ie.jsx("ul",{className:"space-y-3",children:["Comprendre la mécanique concernée","Identifier si la situation est compatible","Éviter les erreurs courantes","Préserver l’intégrité de la porte et de la serrure"].map((e,t)=>ie.jsxs("li",{className:"flex items-start text-slate-700",children:[ie.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 mt-2.5 mr-3 flex-shrink-0"}),ie.jsx("span",{className:"leading-relaxed",children:e})]},t))})]}),ie.jsxs("div",{children:[ie.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center",children:[ie.jsx(c,{className:"w-6 h-6 text-orange-600 mr-2"}),"Une approche responsable et encadrée"]}),ie.jsxs("div",{className:"bg-slate-100/50 p-6 rounded-2xl border border-slate-200",children:[ie.jsx("p",{className:"text-slate-700 font-medium mb-3",children:"Les méthodes présentées :"}),ie.jsxs("ul",{className:"space-y-2 mb-6 text-slate-600",children:[ie.jsxs("li",{className:"flex items-center",children:[ie.jsx(E,{className:"w-4 h-4 text-slate-400 mr-2"})," Ne constituent pas un dépannage physique"]}),ie.jsxs("li",{className:"flex items-center",children:[ie.jsx(E,{className:"w-4 h-4 text-slate-400 mr-2"})," Ne garantissent pas un résultat"]}),ie.jsxs("li",{className:"flex items-center",children:[ie.jsx(N,{className:"w-4 h-4 text-green-500 mr-2"})," Ne s’appliquent que dans des situations autorisées"]})]}),ie.jsx("p",{className:"text-sm text-slate-500 border-t border-slate-200 pt-4 italic",children:'"Avant toute action, l’utilisateur est invité à analyser sa situation, à respecter les conditions de compatibilité, et à interrompre immédiatement en cas de doute."'})]})]}),ie.jsxs("div",{children:[ie.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center",children:[ie.jsx(z,{className:"w-6 h-6 text-blue-600 mr-2"}),"Des contenus pédagogiques, pas des interventions"]}),ie.jsxs("div",{className:"text-slate-600 leading-relaxed space-y-4",children:[ie.jsx("p",{children:"Les guides fournis (PDF et vidéos) ont une vocation :"}),ie.jsx("div",{className:"flex flex-wrap gap-3",children:["Éducative","Préventive","Informative"].map(e=>ie.jsx("span",{className:"px-4 py-1.5 bg-white text-slate-700 rounded-full text-sm font-bold border border-slate-200 shadow-sm",children:e},e))}),ie.jsx("p",{className:"pt-2",children:"Ils permettent de prendre une décision éclairée, que ce soit pour agir soi-même lorsque c’est possible, ou pour comprendre quand une intervention extérieure est nécessaire."})]})]}),ie.jsx("div",{className:"bg-slate-900 rounded-2xl p-8 text-center md:text-left md:flex md:items-center md:justify-between shadow-xl shadow-slate-900/10",children:ie.jsxs("div",{className:"mb-6 md:mb-0 md:mr-6",children:[ie.jsxs("div",{className:"flex items-center justify-center md:justify-start mb-2",children:[ie.jsx(j,{className:"w-5 h-5 text-green-400 mr-2"}),ie.jsx("h2",{className:"text-lg font-bold text-white",children:"Sécurité, légalité et transparence"})]}),ie.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed max-w-xl",children:["L’accès aux contenus est sécurisé. Les supports sont protégés et réservés à un usage personnel."," ",ie.jsx("span",{className:"text-slate-200",children:"Aucune information n’est destinée à contourner un dispositif de sécurité ou à faciliter une utilisation illégale."})]})]})})]}),ie.jsx("div",{className:"mt-16 text-center",children:ie.jsx("button",{onClick:()=>i("home"),className:"inline-flex items-center text-slate-900 font-bold border-2 border-slate-200 px-8 py-3 rounded-xl hover:bg-slate-900 hover:text-white hover:border-slate-900 transition duration-300",children:"Retour au catalogue"})})]})});default:return ie.jsxs(ie.Fragment,{children:[ie.jsx(ye,{onCtaClick:()=>{requestAnimationFrame(()=>{const e=document.getElementById("products-section");null==e||e.scrollIntoView({behavior:"smooth",block:"start"})})}}),ie.jsx("div",{className:"bg-slate-900 border-y border-slate-800 py-6",children:ie.jsxs("div",{className:"max-w-7xl mx-auto px-4 flex flex-wrap justify-center gap-8 md:gap-16 text-slate-400 text-sm font-medium uppercase tracking-widest",children:[ie.jsxs("div",{className:"flex items-center",children:[ie.jsx(c,{className:"w-5 h-5 mr-2 text-slate-600"})," 100% Légal"]}),ie.jsxs("div",{className:"flex items-center",children:[ie.jsx(K,{className:"w-5 h-5 mr-2 text-slate-600"})," +5000 Clients aidés"]}),ie.jsxs("div",{className:"flex items-center",children:[ie.jsx(L,{className:"w-5 h-5 mr-2 text-slate-600"})," Accès Immédiat"]})]})}),ie.jsx("div",{id:"products-section",className:"py-20 bg-slate-50",children:ie.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[ie.jsxs("div",{className:"text-center mb-16",children:[ie.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-slate-900",children:"Choisissez votre solution"}),ie.jsx("p",{className:"mt-4 text-lg text-slate-500 max-w-2xl mx-auto",children:"Identifiez votre problème. Nous avons le plan d'action correspondant."})]}),ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:T.map(e=>ie.jsx(we,{product:e,isOwned:null==l?void 0:l.purchasedProductIds.includes(e.id)},e.id))})]})}),ie.jsx(Zr,{}),ie.jsx(oa,{onOpenChat:()=>_(!0)}),ie.jsx(ea,{}),ie.jsx(na,{}),ie.jsx(la,{})]})}})()}),ie.jsx(Kr,{user:l,isOpen:v,onToggle:()=>_(!v)}),m&&ie.jsx(zr,{onAcceptAll:()=>M({necessary:!0,analytics:!0,marketing:!0}),onRefuseAll:()=>M({necessary:!0,analytics:!1,marketing:!1}),onSavePreferences:M,onLearnMore:()=>i("privacy")}),S&&ie.jsxs("div",{className:"fixed bottom-2 left-2 z-[300] px-3 py-2 text-xs rounded bg-slate-900/80 text-slate-100 border border-slate-700 shadow",children:["Dev • Supabase: ",R||"non défini"]})]})},va=()=>ie.jsx(Ie,{children:ie.jsx(da,{children:ie.jsx(ra,{children:ie.jsx(me,{children:ie.jsx(Ea,{})})})})});class _a extends a.Component{constructor(e){var t;super(e),((e,t,s)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(t="handleReload")?t+"":t,()=>{window.location.reload()}),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){var e,t,s,r,a;if(this.state.hasError){const n=(null==(t=null==(e=this.state.error)?void 0:e.message)?void 0:t.includes("Configuration Supabase manquante"))||(null==(r=null==(s=this.state.error)?void 0:s.message)?void 0:r.includes("VITE_SUPABASE"));return ie.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-slate-50 to-orange-50 flex items-center justify-center p-4",children:ie.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 border border-slate-200",children:[ie.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[ie.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:ie.jsx(_,{className:"w-8 h-8 text-red-600"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:n?"Configuration Requise":"Erreur d'Application"}),ie.jsx("p",{className:"text-slate-600",children:n?"L'application nécessite une configuration":"Une erreur inattendue s'est produite"})]})]}),ie.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[ie.jsx("h2",{className:"font-semibold text-red-900 mb-2",children:"Message d'erreur :"}),ie.jsx("p",{className:"text-red-800 text-sm font-mono break-words",children:null==(a=this.state.error)?void 0:a.message})]}),n&&ie.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[ie.jsxs("h2",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[ie.jsx($,{className:"w-5 h-5"}),"Comment résoudre ce problème :"]}),ie.jsxs("ol",{className:"space-y-3 text-sm text-slate-700",children:[ie.jsxs("li",{className:"flex gap-2",children:[ie.jsx("span",{className:"font-bold text-blue-600 min-w-[24px]",children:"1."}),ie.jsx("div",{children:ie.jsxs("p",{className:"font-medium mb-1",children:["Créez un fichier ",ie.jsx("code",{className:"bg-slate-200 px-2 py-1 rounded",children:".env.local"})," à la racine du projet"]})})]}),ie.jsxs("li",{className:"flex gap-2",children:[ie.jsx("span",{className:"font-bold text-blue-600 min-w-[24px]",children:"2."}),ie.jsxs("div",{children:[ie.jsx("p",{className:"font-medium mb-1",children:"Ajoutez vos variables d'environnement :"}),ie.jsx("pre",{className:"bg-slate-800 text-green-400 p-3 rounded mt-2 text-xs overflow-x-auto",children:"VITE_SUPABASE_URL=https://votre-projet.supabase.co\nVITE_SUPABASE_ANON_KEY=votre-cle-anon-ici\nVITE_STRIPE_PUBLIC_KEY=pk_test_votre-cle-ici"})]})]}),ie.jsxs("li",{className:"flex gap-2",children:[ie.jsx("span",{className:"font-bold text-blue-600 min-w-[24px]",children:"3."}),ie.jsxs("div",{children:[ie.jsx("p",{className:"font-medium",children:"Obtenez vos clés depuis :"}),ie.jsxs("ul",{className:"mt-2 space-y-1 ml-4",children:[ie.jsxs("li",{className:"text-xs",children:["• ",ie.jsx("strong",{children:"Supabase:"})," Dashboard → Settings → API"]}),ie.jsxs("li",{className:"text-xs",children:["• ",ie.jsx("strong",{children:"Stripe:"})," Dashboard → Developers → API keys"]})]})]})]}),ie.jsxs("li",{className:"flex gap-2",children:[ie.jsx("span",{className:"font-bold text-blue-600 min-w-[24px]",children:"4."}),ie.jsxs("div",{children:[ie.jsx("p",{className:"font-medium",children:"Redémarrez le serveur de développement :"}),ie.jsx("pre",{className:"bg-slate-800 text-green-400 p-2 rounded mt-2 text-xs",children:"npm run dev"})]})]})]})]}),ie.jsxs("div",{className:"flex gap-3",children:[ie.jsxs("button",{onClick:this.handleReload,className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[ie.jsx(J,{className:"w-5 h-5"}),"Recharger la page"]}),ie.jsxs("a",{href:"https://github.com/samakei/SerrureMaster-#readme",target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-slate-200 hover:bg-slate-300 text-slate-900 font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[ie.jsx($,{className:"w-5 h-5"}),"Documentation"]})]}),!n&&!1]})})}return this.props.children}}const ja=({children:e})=>ie.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-slate-50 to-orange-50 flex items-center justify-center p-4",children:ie.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 border border-slate-200",children:[ie.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[ie.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:ie.jsx(_,{className:"w-8 h-8 text-red-600"})}),ie.jsxs("div",{children:[ie.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Configuration Requise"}),ie.jsx("p",{className:"text-slate-600",children:"L'application nécessite une configuration"})]})]}),ie.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[ie.jsx("h2",{className:"font-semibold text-red-900 mb-2",children:"Message d'erreur :"}),ie.jsx("p",{className:"text-red-800 text-sm font-mono break-words",children:Jr})]}),ie.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[ie.jsxs("h2",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[ie.jsx($,{className:"w-5 h-5"}),"Comment résoudre ce problème :"]}),ie.jsxs("ol",{className:"space-y-3 text-sm text-slate-700",children:[ie.jsxs("li",{className:"flex gap-2",children:[ie.jsx("span",{className:"font-bold text-blue-600 min-w-[24px]",children:"1."}),ie.jsx("div",{children:ie.jsxs("p",{className:"font-medium mb-1",children:["Créez un fichier"," ",ie.jsx("code",{className:"bg-slate-200 px-2 py-1 rounded",children:".env.local"})," à la racine du projet"]})})]}),ie.jsxs("li",{className:"flex gap-2",children:[ie.jsx("span",{className:"font-bold text-blue-600 min-w-[24px]",children:"2."}),ie.jsxs("div",{children:[ie.jsx("p",{className:"font-medium mb-1",children:"Ajoutez vos variables d'environnement :"}),ie.jsx("pre",{className:"bg-slate-800 text-green-400 p-3 rounded mt-2 text-xs overflow-x-auto",children:"VITE_SUPABASE_URL=https://votre-projet.supabase.co\nVITE_SUPABASE_ANON_KEY=votre-cle-anon-ici\nVITE_STRIPE_PUBLIC_KEY=pk_test_votre-cle-ici"})]})]}),ie.jsxs("li",{className:"flex gap-2",children:[ie.jsx("span",{className:"font-bold text-blue-600 min-w-[24px]",children:"3."}),ie.jsxs("div",{children:[ie.jsx("p",{className:"font-medium",children:"Obtenez vos clés depuis :"}),ie.jsxs("ul",{className:"mt-2 space-y-1 ml-4",children:[ie.jsxs("li",{className:"text-xs",children:["• ",ie.jsx("strong",{children:"Supabase:"})," Dashboard → Settings → API"]}),ie.jsxs("li",{className:"text-xs",children:["• ",ie.jsx("strong",{children:"Stripe:"})," Dashboard → Developers → API keys"]})]})]})]}),ie.jsxs("li",{className:"flex gap-2",children:[ie.jsx("span",{className:"font-bold text-blue-600 min-w-[24px]",children:"4."}),ie.jsxs("div",{children:[ie.jsx("p",{className:"font-medium",children:"Redémarrez le serveur de développement :"}),ie.jsx("pre",{className:"bg-slate-800 text-green-400 p-2 rounded mt-2 text-xs",children:"npm run dev"})]})]})]})]}),ie.jsxs("div",{className:"flex gap-3",children:[ie.jsxs("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[ie.jsx(J,{className:"w-5 h-5"}),"Recharger la page"]}),ie.jsxs("a",{href:"https://github.com/samakei/SerrureMaster-#readme",target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-slate-200 hover:bg-slate-300 text-slate-900 font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[ie.jsx($,{className:"w-5 h-5"}),"Documentation"]})]})]})});if("undefined"!=typeof window&&void 0!==window.chrome){const r=null==(s=null==(t=null==(e=window.chrome)?void 0:e.runtime)?void 0:t.onMessage)?void 0:s.addListener;r&&r.call(window.chrome.runtime.onMessage,(e,t,s)=>{try{s({received:!0})}catch{}return!1})}const Ia=document.getElementById("root");if(!Ia)throw new Error("Could not find root element to mount to");le.createRoot(Ia).render(ie.jsx(i.StrictMode,{children:ie.jsx(ja,{children:ie.jsx(_a,{children:ie.jsx(va,{})})})}));export{pe as A,fe as L,be as M,ge as P,ua as a,ie as j,aa as u};
